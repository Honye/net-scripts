/******************************************
 * ÂèÇËÄÉÔºö
 * @name ÁΩë‰∏äÂõΩÁΩëÂ∞èÁªÑ‰ª∂Êï∞ÊçÆÊõ¥Êñ∞Êé•Âè£
 * @description ÁΩë‰∏äÂõΩÁΩëÁîµË¥πÊü•ËØ¢
 * @channel https://t.me/yqc_123/
 * @feedback https://t.me/NobyDa_Chat
 * @author Â∞èÁôΩËÑ∏|ùêéùêçùêôùüëùêï
 *
 * @description ÂÄüÁî® @Yuheng0101 Â§ß‰Ω¨ËÑöÊú¨Êõ¥ÊîπÔºåË∞ÉÊï¥‰∫ÜÊé•Âè£ËøîÂõûÁöÑÂÜÖÂÆπÔºåÂ¢ûÂä†ÂéªÂπ¥ÁöÑÁî®ÁîµÈáè
 *
BoxJsËÆ¢ÈòÖÂú∞ÂùÄ:
https://raw.githubusercontent.com/Yuheng0101/X/main/Tasks/boxjs.json

#!name =üî¥ ÁΩë‰∏äÂõΩÁΩë
#!category=ÈÄöÁî®ÈáçÂÜô
#!desc=95598

[Script]
Êé•Âè£ÈáçÂÜô = type=http-request, pattern=^https?:\/\/api\.wsgw-rewrite\.com\/electricity\/bill\/all, script-path=https://raw.githubusercontent.com/Honye/net-scripts/refs/heads/main/dist/95598.cn.js, requires-body=true, max-size=-1, timeout=60

[MITM]
hostname = %APPEND% api.wsgw-rewrite.com


******************************************/
function getDefaultExportFromCjs(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var md5$1={exports:{}},crypt={exports:{}},hasRequiredCrypt,charenc_1,hasRequiredCharenc,isBuffer_1,hasRequiredIsBuffer,hasRequiredMd5;function requireCrypt(){return hasRequiredCrypt||(hasRequiredCrypt=1,e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t={rotl:function(e,t){return e<<t|e>>>32-t},rotr:function(e,t){return e<<32-t|e>>>t},endian:function(e){if(e.constructor==Number)return 16711935&t.rotl(e,8)|4278255360&t.rotl(e,24);for(var o=0;o<e.length;o++)e[o]=t.endian(e[o]);return e},randomBytes:function(e){for(var t=[];e>0;e--)t.push(Math.floor(256*Math.random()));return t},bytesToWords:function(e){for(var t=[],o=0,r=0;o<e.length;o++,r+=8)t[r>>>5]|=e[o]<<24-r%32;return t},wordsToBytes:function(e){for(var t=[],o=0;o<32*e.length;o+=8)t.push(e[o>>>5]>>>24-o%32&255);return t},bytesToHex:function(e){for(var t=[],o=0;o<e.length;o++)t.push((e[o]>>>4).toString(16)),t.push((15&e[o]).toString(16));return t.join("")},hexToBytes:function(e){for(var t=[],o=0;o<e.length;o+=2)t.push(parseInt(e.substr(o,2),16));return t},bytesToBase64:function(t){for(var o=[],r=0;r<t.length;r+=3)for(var n=t[r]<<16|t[r+1]<<8|t[r+2],s=0;s<4;s++)8*r+6*s<=8*t.length?o.push(e.charAt(n>>>6*(3-s)&63)):o.push("=");return o.join("")},base64ToBytes:function(t){t=t.replace(/[^A-Z0-9+\/]/gi,"");for(var o=[],r=0,n=0;r<t.length;n=++r%4)0!=n&&o.push((e.indexOf(t.charAt(r-1))&Math.pow(2,-2*n+8)-1)<<2*n|e.indexOf(t.charAt(r))>>>6-2*n);return o}},crypt.exports=t),crypt.exports;var e,t}function requireCharenc(){if(hasRequiredCharenc)return charenc_1;hasRequiredCharenc=1;var e={utf8:{stringToBytes:function(t){return e.bin.stringToBytes(unescape(encodeURIComponent(t)))},bytesToString:function(t){return decodeURIComponent(escape(e.bin.bytesToString(t)))}},bin:{stringToBytes:function(e){for(var t=[],o=0;o<e.length;o++)t.push(255&e.charCodeAt(o));return t},bytesToString:function(e){for(var t=[],o=0;o<e.length;o++)t.push(String.fromCharCode(e[o]));return t.join("")}}};return charenc_1=e}
/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */function requireIsBuffer(){if(hasRequiredIsBuffer)return isBuffer_1;function e(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}return hasRequiredIsBuffer=1,isBuffer_1=function(t){return null!=t&&(e(t)||function(t){return"function"==typeof t.readFloatLE&&"function"==typeof t.slice&&e(t.slice(0,0))}(t)||!!t._isBuffer)}}function requireMd5(){return hasRequiredMd5||(hasRequiredMd5=1,function(){var e=requireCrypt(),t=requireCharenc().utf8,o=requireIsBuffer(),r=requireCharenc().bin,n=function(s,i){s.constructor==String?s=i&&"binary"===i.encoding?r.stringToBytes(s):t.stringToBytes(s):o(s)?s=Array.prototype.slice.call(s,0):Array.isArray(s)||s.constructor===Uint8Array||(s=s.toString());for(var c=e.bytesToWords(s),a=8*s.length,u=1732584193,p=-271733879,l=-1732584194,m=271733878,g=0;g<c.length;g++)c[g]=16711935&(c[g]<<8|c[g]>>>24)|4278255360&(c[g]<<24|c[g]>>>8);c[a>>>5]|=128<<a%32,c[14+(a+64>>>9<<4)]=a;var f=n._ff,d=n._gg,h=n._hh,b=n._ii;for(g=0;g<c.length;g+=16){var y=u,C=p,v=l,w=m;u=f(u,p,l,m,c[g+0],7,-680876936),m=f(m,u,p,l,c[g+1],12,-389564586),l=f(l,m,u,p,c[g+2],17,606105819),p=f(p,l,m,u,c[g+3],22,-1044525330),u=f(u,p,l,m,c[g+4],7,-176418897),m=f(m,u,p,l,c[g+5],12,1200080426),l=f(l,m,u,p,c[g+6],17,-1473231341),p=f(p,l,m,u,c[g+7],22,-45705983),u=f(u,p,l,m,c[g+8],7,1770035416),m=f(m,u,p,l,c[g+9],12,-1958414417),l=f(l,m,u,p,c[g+10],17,-42063),p=f(p,l,m,u,c[g+11],22,-1990404162),u=f(u,p,l,m,c[g+12],7,1804603682),m=f(m,u,p,l,c[g+13],12,-40341101),l=f(l,m,u,p,c[g+14],17,-1502002290),u=d(u,p=f(p,l,m,u,c[g+15],22,1236535329),l,m,c[g+1],5,-165796510),m=d(m,u,p,l,c[g+6],9,-1069501632),l=d(l,m,u,p,c[g+11],14,643717713),p=d(p,l,m,u,c[g+0],20,-373897302),u=d(u,p,l,m,c[g+5],5,-701558691),m=d(m,u,p,l,c[g+10],9,38016083),l=d(l,m,u,p,c[g+15],14,-660478335),p=d(p,l,m,u,c[g+4],20,-405537848),u=d(u,p,l,m,c[g+9],5,568446438),m=d(m,u,p,l,c[g+14],9,-1019803690),l=d(l,m,u,p,c[g+3],14,-187363961),p=d(p,l,m,u,c[g+8],20,1163531501),u=d(u,p,l,m,c[g+13],5,-1444681467),m=d(m,u,p,l,c[g+2],9,-51403784),l=d(l,m,u,p,c[g+7],14,1735328473),u=h(u,p=d(p,l,m,u,c[g+12],20,-1926607734),l,m,c[g+5],4,-378558),m=h(m,u,p,l,c[g+8],11,-2022574463),l=h(l,m,u,p,c[g+11],16,1839030562),p=h(p,l,m,u,c[g+14],23,-35309556),u=h(u,p,l,m,c[g+1],4,-1530992060),m=h(m,u,p,l,c[g+4],11,1272893353),l=h(l,m,u,p,c[g+7],16,-155497632),p=h(p,l,m,u,c[g+10],23,-1094730640),u=h(u,p,l,m,c[g+13],4,681279174),m=h(m,u,p,l,c[g+0],11,-358537222),l=h(l,m,u,p,c[g+3],16,-722521979),p=h(p,l,m,u,c[g+6],23,76029189),u=h(u,p,l,m,c[g+9],4,-640364487),m=h(m,u,p,l,c[g+12],11,-421815835),l=h(l,m,u,p,c[g+15],16,530742520),u=b(u,p=h(p,l,m,u,c[g+2],23,-995338651),l,m,c[g+0],6,-198630844),m=b(m,u,p,l,c[g+7],10,1126891415),l=b(l,m,u,p,c[g+14],15,-1416354905),p=b(p,l,m,u,c[g+5],21,-57434055),u=b(u,p,l,m,c[g+12],6,1700485571),m=b(m,u,p,l,c[g+3],10,-1894986606),l=b(l,m,u,p,c[g+10],15,-1051523),p=b(p,l,m,u,c[g+1],21,-2054922799),u=b(u,p,l,m,c[g+8],6,1873313359),m=b(m,u,p,l,c[g+15],10,-30611744),l=b(l,m,u,p,c[g+6],15,-1560198380),p=b(p,l,m,u,c[g+13],21,1309151649),u=b(u,p,l,m,c[g+4],6,-145523070),m=b(m,u,p,l,c[g+11],10,-1120210379),l=b(l,m,u,p,c[g+2],15,718787259),p=b(p,l,m,u,c[g+9],21,-343485551),u=u+y>>>0,p=p+C>>>0,l=l+v>>>0,m=m+w>>>0}return e.endian([u,p,l,m])};n._ff=function(e,t,o,r,n,s,i){var c=e+(t&o|~t&r)+(n>>>0)+i;return(c<<s|c>>>32-s)+t},n._gg=function(e,t,o,r,n,s,i){var c=e+(t&r|o&~r)+(n>>>0)+i;return(c<<s|c>>>32-s)+t},n._hh=function(e,t,o,r,n,s,i){var c=e+(t^o^r)+(n>>>0)+i;return(c<<s|c>>>32-s)+t},n._ii=function(e,t,o,r,n,s,i){var c=e+(o^(t|~r))+(n>>>0)+i;return(c<<s|c>>>32-s)+t},n._blocksize=16,n._digestsize=16,md5$1.exports=function(t,o){if(null==t)throw new Error("Illegal argument "+t);var s=e.wordsToBytes(n(t,o));return o&&o.asBytes?s:o&&o.asString?r.bytesToString(s):e.bytesToHex(s)}}()),md5$1.exports}var md5Exports=requireMd5(),md5=getDefaultExportFromCjs(md5Exports);const apis={apiUrl:"/api",apiUrl2:"/api2",equipment:"1",province:"23101",appKey:"7e5b5e84ddad4994b0ebc68dedca4962",appSecret:"2bc37a881e1541aaa6e6e174658d150b",publicKey:"042D12DFBC179202AC4B7B7BADCDA6FF7B604339263F6AB732CE7107B7EA3830A2CA714DC303920D3CFF7647D898F1A8CC6C24E9EC3CC194E22D984AF7E16B42DC",redirectUrl:"/test",privkeyhex:"cb772811f1fef955ce1b4051130870d86cca6afede806f1e7c225d7359591d2b",pubkeyhex:"0475e60ab5b94860dad0c2d193551a8b7a628a611df332e23dfcb42f6ecc348653b8a49418e52ff8872b500eeaf8be8c43b7389d115e91b7432bb1c939e764d31a",axiosPromiseArr:[],getRequestKeyApi:"/oauth2/outer/c02/f02",getRequestAuthorizeApi:"/oauth2/oauth/authorize",getRequestTApi:"/oauth2/outer/getWebToken",getUrlKeFu:"",wsgwType:"web",AuthorizationHeader:"Bearer ",interfaceVersion:"1.0",source:"0901",no_auth_api_list:["/api/oauth2/outer/c02/f02","/api/oauth2/oauth/authorize"],no_loading_api_list:["/api/osg-open-om0001/member/c13/f05","/api/osg-open-om0001/member/c16/f02","/api/osg-open-om0001/member/c16/f03","/api/osg-open-om0001/member/arg/020390035","/api/osg-open-scp0001/member/c5/f01","/api/osg-web0004/open/c50/f02","/api/open/c1/f04","/api/open/c2/f04","/api/osg-open-mce0001/member/c4/f06","/api/osg-web0004/open/c7/f01","/api/osg-web0004/member/c4/f08","/api/osg-open-uc0001/member/c8/f23","/api/osg-web0004/open/c1/f01","/api/osg-web0004/open/c15/f03","/api/osg-web0004/open/c4/f01","/api/osg-web0004/open/c2/f01","/api/osg-open-mce0001/member/c4/f01","/api/osg-wp0002/member/charge/getOrderHeaderStatus","http://30.20.110.179:8081/part.json","/api/osg-uc0015/member/c1/f02","/api/osg-open-mce0001/member/c06/f01","/api/osg-web0004/open/c8/f01","/api/osg-web0004/open/c4/f03","/api/osg-web0004/open/c3/f01","/api/osg-web0004/member/c15/f02","/api/osg-web0004/open/c1/f01","/api/osg-open-uc0001/member/c9/f02","/api/osg-open-mce0001/member/c4/f02","/api/oauth2/outer/c02/f02","/api/oauth2/outer/getWebToken","/api/oauth2/oauth/authorize","/api/osg-open-sfan0001/member/arg/010210042"],no_crypto_api_list:["/api/osg-open-scp0001/member/c5/f07","/api/osg-scp0002/member/d3/f01","/api/osg-scp0002/member/c2/f01","/api/osg-scp0010/recog/idcardAndUpload","/api/osg-scp0002/member/c7/f01","/api/osg-open-om0001/member/c72/f03","/api/osg-open-uc0001/member/c8/f24","/api/osg-open-scp0001/member/c5/f02","/api/osg-web0004/open/c2/f01","/api/osg-open-scp0001/member/c5/f05","/api/osg-scp0002/member/c8/f01","/api/osg-open-bc0001/member/c11/f52","/api/osg-web0004/open/c7/f01","/api/osg-open-bc0001/member/c11/f46","/api/osg-open-bc0001/member/c11/f56","/api/osg-open-bc0001/member/c11/f57","/api/osg-open-bc0001/member/c11/f59","/api/osg-open-bc0001/member/c11/f58","/api/osg-open-sfan0001/member/arg/030010176","/api/osg-open-sfan0001/member/arg/030010177","/api/osg-open-bc0001/member/arg/020010002"],auth_user_api_list:["/api/osg-sfan0004/member/c1/f06","/api/osg-sfan0004/member/c1/f05","/api/osg-uc0012/member/c2/f01"],no_retry_api_list:["/api/osg-open-uc0001/member/c8/f23","/api/osg-web0004/open/c15/f03","/api/osg-web0004/open/c50/f02","/api/osg-web0004/open/c44/f02"],access_risk_control_api_list:["/api/osg-open-uc0001/member/c8/f25","/api/osg-open-uc0001/member/c8/f04","/api/osg-uc0013/member/c4/f02","/api/osg-web0004/open/c44/f02","/api/osg-open-uc0001/member/c9/f02","/api/osg-open-uc0001/member/c9/f03","/api/osg-open-uc0001/member/c14/f02","/api/osg-open-scp0001/member/c5/f07","/api/osg-open-uc0001/member/c8/f02","/api/osg-open-uc0001/member/c9/f22","/api/osg-open-uc0001/member/arg/020210008"],is_crypto:!0,requestTimeout:3e4,retry:3,retryDelay:3e3,shouldRetry:!0,isDebug:1,envType:3},loginApis={loginVerifyCodeNew:"/osg-web0004/open/c44/f05",loginTestCodeNew:"/osg-web0004/open/c44/f06",hadList:"/osg-open-uc0001/member/c9/f02",accapi:"/osg-open-bc0001/member/c05/f01"};var _0x2b15d4={...apis,...loginApis},base64Js={},hasRequiredBase64Js;function requireBase64Js(){if(hasRequiredBase64Js)return base64Js;hasRequiredBase64Js=1,base64Js.byteLength=function(e){var t=s(e),o=t[0],r=t[1];return 3*(o+r)/4-r},base64Js.toByteArray=function(e){var r,n,i=s(e),c=i[0],a=i[1],u=new o(function(e,t,o){return 3*(t+o)/4-o}(0,c,a)),p=0,l=a>0?c-4:c;for(n=0;n<l;n+=4)r=t[e.charCodeAt(n)]<<18|t[e.charCodeAt(n+1)]<<12|t[e.charCodeAt(n+2)]<<6|t[e.charCodeAt(n+3)],u[p++]=r>>16&255,u[p++]=r>>8&255,u[p++]=255&r;2===a&&(r=t[e.charCodeAt(n)]<<2|t[e.charCodeAt(n+1)]>>4,u[p++]=255&r);1===a&&(r=t[e.charCodeAt(n)]<<10|t[e.charCodeAt(n+1)]<<4|t[e.charCodeAt(n+2)]>>2,u[p++]=r>>8&255,u[p++]=255&r);return u},base64Js.fromByteArray=function(t){for(var o,r=t.length,n=r%3,s=[],i=16383,a=0,u=r-n;a<u;a+=i)s.push(c(t,a,a+i>u?u:a+i));1===n?(o=t[r-1],s.push(e[o>>2]+e[o<<4&63]+"==")):2===n&&(o=(t[r-2]<<8)+t[r-1],s.push(e[o>>10]+e[o>>4&63]+e[o<<2&63]+"="));return s.join("")};for(var e=[],t=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n=0;n<64;++n)e[n]=r[n],t[r.charCodeAt(n)]=n;function s(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var o=e.indexOf("=");return-1===o&&(o=t),[o,o===t?0:4-o%4]}function i(t){return e[t>>18&63]+e[t>>12&63]+e[t>>6&63]+e[63&t]}function c(e,t,o){for(var r,n=[],s=t;s<o;s+=3)r=(e[s]<<16&16711680)+(e[s+1]<<8&65280)+(255&e[s+2]),n.push(i(r));return n.join("")}return t["-".charCodeAt(0)]=62,t["_".charCodeAt(0)]=63,base64Js}var base64JsExports=requireBase64Js(),base64js=getDefaultExportFromCjs(base64JsExports);class Crypt{static stringToArrayBufferInUtf8(e){let t=e.length,o=0;for(let r=0;r<t;r++){let t=e.charCodeAt(r);t<128?o+=1:t<2048?o+=2:t<55296||t>=57344?o+=3:(r++,o+=4)}const r=new Uint8Array(o);let n=0;for(let o=0;o<t;o++){let s=e.charCodeAt(o);if(s<128)r[n++]=s;else if(s<2048)r[n++]=192|s>>6,r[n++]=128|63&s;else if(s<55296||s>=57344)r[n++]=224|s>>12,r[n++]=128|s>>6&63,r[n++]=128|63&s;else if(o+1<t){s=65536+((1023&s)<<10)+(1023&e.charCodeAt(o+1)),o++,r[n++]=240|s>>18,r[n++]=128|s>>12&63,r[n++]=128|s>>6&63,r[n++]=128|63&s}}return r}static utf8ArrayBufferToString(e){const t=new Uint8Array(e.buffer||e);let o="",r=0;const n=t.length;for(;r<n;){const e=t[r++];if(128&e)if(192==(224&e)){if(r>=n)break;const s=63&t[r++];o+=String.fromCharCode((31&e)<<6|s)}else if(224==(240&e)){if(r+1>=n)break;const s=63&t[r++],i=63&t[r++];o+=String.fromCharCode((15&e)<<12|s<<6|i)}else if(240==(248&e)){if(r+2>=n)break;let s=(7&e)<<18|(63&t[r++])<<12|(63&t[r++])<<6|63&t[r++];if(s>65535){s-=65536;const e=s>>10|55296,t=1023&s|56320;o+=String.fromCharCode(e,t)}else o+=String.fromCharCode(s)}else o+=String.fromCharCode(65533);else o+=String.fromCharCode(e)}return o}static arrayBufferToBase64(e){return base64js.fromByteArray(e)}static base64ToArrayBuffer(e){return base64js.toByteArray(e)}}const UINT8_BLOCK=16,Sbox=Uint8Array.from([214,144,233,254,204,225,61,183,22,182,20,194,40,251,44,5,43,103,154,118,42,190,4,195,170,68,19,38,73,134,6,153,156,66,80,244,145,239,152,122,51,84,11,67,237,207,172,98,228,179,28,169,201,8,232,149,128,223,148,250,117,143,63,166,71,7,167,252,243,115,23,186,131,89,60,25,230,133,79,168,104,107,129,178,113,100,218,139,248,235,15,75,112,86,157,53,30,36,14,94,99,88,209,162,37,34,124,59,1,33,120,135,212,0,70,87,159,211,39,82,76,54,2,231,160,196,200,158,234,191,138,210,64,199,56,181,163,247,242,206,249,97,21,161,224,174,93,164,155,52,26,85,173,147,50,48,245,140,177,227,29,246,226,46,130,102,202,96,192,41,35,171,13,83,78,111,213,219,55,69,222,253,142,47,3,255,106,114,109,108,91,81,141,27,175,146,187,221,188,127,17,217,92,65,31,16,90,216,10,193,49,136,165,205,123,189,45,116,208,18,184,229,180,176,137,105,151,74,12,150,119,126,101,185,241,9,197,110,198,132,24,240,125,236,58,220,77,32,121,238,95,62,215,203,57,72]),CK=Uint32Array.from([462357,472066609,943670861,1415275113,1886879365,2358483617,2830087869,3301692121,3773296373,4228057617,404694573,876298825,1347903077,1819507329,2291111581,2762715833,3234320085,3705924337,4177462797,337322537,808926789,1280531041,1752135293,2223739545,2695343797,3166948049,3638552301,4110090761,269950501,741554753,1213159005,1684763257]),FK=Uint32Array.from([2746333894,1453994832,1736282519,2993693404]);class SM4{constructor(e){let t=Crypt.stringToArrayBufferInUtf8(e.key);this.key=t;let o=new Uint8Array(0);if(void 0!==e.iv&&null!==e.iv&&(o=Crypt.stringToArrayBufferInUtf8(e.iv),16!==o.length))throw new Error("iv should be a 16 bytes string");this.iv=o,this.mode="cbc",["cbc","ecb"].indexOf(e.mode)>=0&&(this.mode=e.mode),this.cipherType="base64",["base64","text"].indexOf(e.outType)>=0&&(this.cipherType=e.outType),this.encryptRoundKeys=new Uint32Array(32),this.spawnEncryptRoundKeys(),this.decryptRoundKeys=Uint32Array.from(this.encryptRoundKeys),this.decryptRoundKeys.reverse()}doBlockCrypt(e,t){let o=new Uint32Array(36);o.set(e,0);for(let e=0;e<32;e++)o[e+4]=o[e]^this.tTransform1(o[e+1]^o[e+2]^o[e+3]^t[e]);let r=new Uint32Array(4);return r[0]=o[35],r[1]=o[34],r[2]=o[33],r[3]=o[32],r}spawnEncryptRoundKeys(){let e=new Uint32Array(4);e[0]=this.key[0]<<24|this.key[1]<<16|this.key[2]<<8|this.key[3],e[1]=this.key[4]<<24|this.key[5]<<16|this.key[6]<<8|this.key[7],e[2]=this.key[8]<<24|this.key[9]<<16|this.key[10]<<8|this.key[11],e[3]=this.key[12]<<24|this.key[13]<<16|this.key[14]<<8|this.key[15];let t=new Uint32Array(36);t[0]=e[0]^FK[0],t[1]=e[1]^FK[1],t[2]=e[2]^FK[2],t[3]=e[3]^FK[3];for(let e=0;e<32;e++)t[e+4]=t[e]^this.tTransform2(t[e+1]^t[e+2]^t[e+3]^CK[e]),this.encryptRoundKeys[e]=t[e+4]}rotateLeft(e,t){return e<<t|e>>>32-t}linearTransform1(e){return e^this.rotateLeft(e,2)^this.rotateLeft(e,10)^this.rotateLeft(e,18)^this.rotateLeft(e,24)}linearTransform2(e){return e^this.rotateLeft(e,13)^this.rotateLeft(e,23)}tauTransform(e){return Sbox[e>>>24&255]<<24|Sbox[e>>>16&255]<<16|Sbox[e>>>8&255]<<8|Sbox[255&e]}tTransform1(e){let t=this.tauTransform(e);return this.linearTransform1(t)}tTransform2(e){let t=this.tauTransform(e);return this.linearTransform2(t)}padding(e){if(null===e)return null;let t=UINT8_BLOCK-e.length%UINT8_BLOCK,o=new Uint8Array(e.length+t);return o.set(e,0),o.fill(t,e.length),o}dePadding(e){if(null===e)return null;let t=e[e.length-1];return e.slice(0,e.length-t)}uint8ToUint32Block(e,t=0){let o=new Uint32Array(4);return o[0]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],o[1]=e[t+4]<<24|e[t+5]<<16|e[t+6]<<8|e[t+7],o[2]=e[t+8]<<24|e[t+9]<<16|e[t+10]<<8|e[t+11],o[3]=e[t+12]<<24|e[t+13]<<16|e[t+14]<<8|e[t+15],o}encrypt(e){let t=Crypt.stringToArrayBufferInUtf8(e),o=this.padding(t),r=o.length/UINT8_BLOCK,n=new Uint8Array(o.length);if("cbc"===this.mode){if(null===this.iv||16!==this.iv.length)throw new Error("iv error");let e=this.uint8ToUint32Block(this.iv);for(let t=0;t<r;t++){let r=t*UINT8_BLOCK,s=this.uint8ToUint32Block(o,r);e[0]=e[0]^s[0],e[1]=e[1]^s[1],e[2]=e[2]^s[2],e[3]=e[3]^s[3];let i=this.doBlockCrypt(e,this.encryptRoundKeys);e=i;for(let e=0;e<UINT8_BLOCK;e++)n[r+e]=i[parseInt(e/4)]>>(3-e)%4*8&255}}else for(let e=0;e<r;e++){let t=e*UINT8_BLOCK,r=this.uint8ToUint32Block(o,t),s=this.doBlockCrypt(r,this.encryptRoundKeys);for(let e=0;e<UINT8_BLOCK;e++)n[t+e]=s[parseInt(e/4)]>>(3-e)%4*8&255}return"base64"===this.cipherType?Crypt.arrayBufferToBase64(n):Crypt.utf8ArrayBufferToString(n)}decrypt(e){let t=new Uint8Array;t="base64"===this.cipherType?Crypt.base64ToArrayBuffer(e):Crypt.stringToArrayBufferInUtf8(e);let o=t.length/UINT8_BLOCK,r=new Uint8Array(t.length);if("cbc"===this.mode){if(null===this.iv||16!==this.iv.length)throw new Error("iv error");let e=this.uint8ToUint32Block(this.iv);for(let n=0;n<o;n++){let o=n*UINT8_BLOCK,s=this.uint8ToUint32Block(t,o),i=this.doBlockCrypt(s,this.decryptRoundKeys),c=new Uint32Array(4);c[0]=e[0]^i[0],c[1]=e[1]^i[1],c[2]=e[2]^i[2],c[3]=e[3]^i[3],e=s;for(let e=0;e<UINT8_BLOCK;e++)r[o+e]=c[parseInt(e/4)]>>(3-e)%4*8&255}}else for(let e=0;e<o;e++){let o=e*UINT8_BLOCK,n=this.uint8ToUint32Block(t,o),s=this.doBlockCrypt(n,this.decryptRoundKeys);for(let e=0;e<UINT8_BLOCK;e++)r[o+e]=s[parseInt(e/4)]>>(3-e)%4*8&255}let n=this.dePadding(r);return Crypt.utf8ArrayBufferToString(n)}}const sm4$1=SM4;var jsbn$1={exports:{}},jsbn=jsbn$1.exports,hasRequiredJsbn,asn1,hasRequiredAsn1,ec,hasRequiredEc,utils$1,hasRequiredUtils,sm3_1$1,hasRequiredSm3$1,sm2$1,hasRequiredSm2,sm3_1,hasRequiredSm3,sm4_1,hasRequiredSm4,src,hasRequiredSrc;function requireJsbn(){return hasRequiredJsbn||(hasRequiredJsbn=1,e=jsbn$1,function(){var t;function o(e,t,o){null!=e&&("number"==typeof e?this.fromNumber(e,t,o):null==t&&"string"!=typeof e?this.fromString(e,256):this.fromString(e,t))}function r(){return new o(null)}var n="undefined"!=typeof navigator;n&&"Microsoft Internet Explorer"==navigator.appName?(o.prototype.am=function(e,t,o,r,n,s){for(var i=32767&t,c=t>>15;--s>=0;){var a=32767&this[e],u=this[e++]>>15,p=c*a+u*i;n=((a=i*a+((32767&p)<<15)+o[r]+(1073741823&n))>>>30)+(p>>>15)+c*u+(n>>>30),o[r++]=1073741823&a}return n},t=30):n&&"Netscape"!=navigator.appName?(o.prototype.am=function(e,t,o,r,n,s){for(;--s>=0;){var i=t*this[e++]+o[r]+n;n=Math.floor(i/67108864),o[r++]=67108863&i}return n},t=26):(o.prototype.am=function(e,t,o,r,n,s){for(var i=16383&t,c=t>>14;--s>=0;){var a=16383&this[e],u=this[e++]>>14,p=c*a+u*i;n=((a=i*a+((16383&p)<<14)+o[r]+n)>>28)+(p>>14)+c*u,o[r++]=268435455&a}return n},t=28),o.prototype.DB=t,o.prototype.DM=(1<<t)-1,o.prototype.DV=1<<t,o.prototype.FV=Math.pow(2,52),o.prototype.F1=52-t,o.prototype.F2=2*t-52;var s,i,c=new Array;for(s="0".charCodeAt(0),i=0;i<=9;++i)c[s++]=i;for(s="a".charCodeAt(0),i=10;i<36;++i)c[s++]=i;for(s="A".charCodeAt(0),i=10;i<36;++i)c[s++]=i;function a(e){return"0123456789abcdefghijklmnopqrstuvwxyz".charAt(e)}function u(e,t){var o=c[e.charCodeAt(t)];return null==o?-1:o}function p(e){var t=r();return t.fromInt(e),t}function l(e){var t,o=1;return 0!=(t=e>>>16)&&(e=t,o+=16),0!=(t=e>>8)&&(e=t,o+=8),0!=(t=e>>4)&&(e=t,o+=4),0!=(t=e>>2)&&(e=t,o+=2),0!=(t=e>>1)&&(e=t,o+=1),o}function m(e){this.m=e}function g(e){this.m=e,this.mp=e.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<e.DB-15)-1,this.mt2=2*e.t}function f(e,t){return e&t}function d(e,t){return e|t}function h(e,t){return e^t}function b(e,t){return e&~t}function y(e){if(0==e)return-1;var t=0;return 65535&e||(e>>=16,t+=16),255&e||(e>>=8,t+=8),15&e||(e>>=4,t+=4),3&e||(e>>=2,t+=2),1&e||++t,t}function C(e){for(var t=0;0!=e;)e&=e-1,++t;return t}function v(){}function w(e){return e}function T(e){this.r2=r(),this.q3=r(),o.ONE.dlShiftTo(2*e.t,this.r2),this.mu=this.r2.divide(e),this.m=e}m.prototype.convert=function(e){return e.s<0||e.compareTo(this.m)>=0?e.mod(this.m):e},m.prototype.revert=function(e){return e},m.prototype.reduce=function(e){e.divRemTo(this.m,null,e)},m.prototype.mulTo=function(e,t,o){e.multiplyTo(t,o),this.reduce(o)},m.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)},g.prototype.convert=function(e){var t=r();return e.abs().dlShiftTo(this.m.t,t),t.divRemTo(this.m,null,t),e.s<0&&t.compareTo(o.ZERO)>0&&this.m.subTo(t,t),t},g.prototype.revert=function(e){var t=r();return e.copyTo(t),this.reduce(t),t},g.prototype.reduce=function(e){for(;e.t<=this.mt2;)e[e.t++]=0;for(var t=0;t<this.m.t;++t){var o=32767&e[t],r=o*this.mpl+((o*this.mph+(e[t]>>15)*this.mpl&this.um)<<15)&e.DM;for(e[o=t+this.m.t]+=this.m.am(0,r,e,t,0,this.m.t);e[o]>=e.DV;)e[o]-=e.DV,e[++o]++}e.clamp(),e.drShiftTo(this.m.t,e),e.compareTo(this.m)>=0&&e.subTo(this.m,e)},g.prototype.mulTo=function(e,t,o){e.multiplyTo(t,o),this.reduce(o)},g.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)},o.prototype.copyTo=function(e){for(var t=this.t-1;t>=0;--t)e[t]=this[t];e.t=this.t,e.s=this.s},o.prototype.fromInt=function(e){this.t=1,this.s=e<0?-1:0,e>0?this[0]=e:e<-1?this[0]=e+this.DV:this.t=0},o.prototype.fromString=function(e,t){var r;if(16==t)r=4;else if(8==t)r=3;else if(256==t)r=8;else if(2==t)r=1;else if(32==t)r=5;else{if(4!=t)return void this.fromRadix(e,t);r=2}this.t=0,this.s=0;for(var n=e.length,s=!1,i=0;--n>=0;){var c=8==r?255&e[n]:u(e,n);c<0?"-"==e.charAt(n)&&(s=!0):(s=!1,0==i?this[this.t++]=c:i+r>this.DB?(this[this.t-1]|=(c&(1<<this.DB-i)-1)<<i,this[this.t++]=c>>this.DB-i):this[this.t-1]|=c<<i,(i+=r)>=this.DB&&(i-=this.DB))}8==r&&128&e[0]&&(this.s=-1,i>0&&(this[this.t-1]|=(1<<this.DB-i)-1<<i)),this.clamp(),s&&o.ZERO.subTo(this,this)},o.prototype.clamp=function(){for(var e=this.s&this.DM;this.t>0&&this[this.t-1]==e;)--this.t},o.prototype.dlShiftTo=function(e,t){var o;for(o=this.t-1;o>=0;--o)t[o+e]=this[o];for(o=e-1;o>=0;--o)t[o]=0;t.t=this.t+e,t.s=this.s},o.prototype.drShiftTo=function(e,t){for(var o=e;o<this.t;++o)t[o-e]=this[o];t.t=Math.max(this.t-e,0),t.s=this.s},o.prototype.lShiftTo=function(e,t){var o,r=e%this.DB,n=this.DB-r,s=(1<<n)-1,i=Math.floor(e/this.DB),c=this.s<<r&this.DM;for(o=this.t-1;o>=0;--o)t[o+i+1]=this[o]>>n|c,c=(this[o]&s)<<r;for(o=i-1;o>=0;--o)t[o]=0;t[i]=c,t.t=this.t+i+1,t.s=this.s,t.clamp()},o.prototype.rShiftTo=function(e,t){t.s=this.s;var o=Math.floor(e/this.DB);if(o>=this.t)t.t=0;else{var r=e%this.DB,n=this.DB-r,s=(1<<r)-1;t[0]=this[o]>>r;for(var i=o+1;i<this.t;++i)t[i-o-1]|=(this[i]&s)<<n,t[i-o]=this[i]>>r;r>0&&(t[this.t-o-1]|=(this.s&s)<<n),t.t=this.t-o,t.clamp()}},o.prototype.subTo=function(e,t){for(var o=0,r=0,n=Math.min(e.t,this.t);o<n;)r+=this[o]-e[o],t[o++]=r&this.DM,r>>=this.DB;if(e.t<this.t){for(r-=e.s;o<this.t;)r+=this[o],t[o++]=r&this.DM,r>>=this.DB;r+=this.s}else{for(r+=this.s;o<e.t;)r-=e[o],t[o++]=r&this.DM,r>>=this.DB;r-=e.s}t.s=r<0?-1:0,r<-1?t[o++]=this.DV+r:r>0&&(t[o++]=r),t.t=o,t.clamp()},o.prototype.multiplyTo=function(e,t){var r=this.abs(),n=e.abs(),s=r.t;for(t.t=s+n.t;--s>=0;)t[s]=0;for(s=0;s<n.t;++s)t[s+r.t]=r.am(0,n[s],t,s,0,r.t);t.s=0,t.clamp(),this.s!=e.s&&o.ZERO.subTo(t,t)},o.prototype.squareTo=function(e){for(var t=this.abs(),o=e.t=2*t.t;--o>=0;)e[o]=0;for(o=0;o<t.t-1;++o){var r=t.am(o,t[o],e,2*o,0,1);(e[o+t.t]+=t.am(o+1,2*t[o],e,2*o+1,r,t.t-o-1))>=t.DV&&(e[o+t.t]-=t.DV,e[o+t.t+1]=1)}e.t>0&&(e[e.t-1]+=t.am(o,t[o],e,2*o,0,1)),e.s=0,e.clamp()},o.prototype.divRemTo=function(e,t,n){var s=e.abs();if(!(s.t<=0)){var i=this.abs();if(i.t<s.t)return null!=t&&t.fromInt(0),void(null!=n&&this.copyTo(n));null==n&&(n=r());var c=r(),a=this.s,u=e.s,p=this.DB-l(s[s.t-1]);p>0?(s.lShiftTo(p,c),i.lShiftTo(p,n)):(s.copyTo(c),i.copyTo(n));var m=c.t,g=c[m-1];if(0!=g){var f=g*(1<<this.F1)+(m>1?c[m-2]>>this.F2:0),d=this.FV/f,h=(1<<this.F1)/f,b=1<<this.F2,y=n.t,C=y-m,v=null==t?r():t;for(c.dlShiftTo(C,v),n.compareTo(v)>=0&&(n[n.t++]=1,n.subTo(v,n)),o.ONE.dlShiftTo(m,v),v.subTo(c,c);c.t<m;)c[c.t++]=0;for(;--C>=0;){var w=n[--y]==g?this.DM:Math.floor(n[y]*d+(n[y-1]+b)*h);if((n[y]+=c.am(0,w,n,C,0,m))<w)for(c.dlShiftTo(C,v),n.subTo(v,n);n[y]<--w;)n.subTo(v,n)}null!=t&&(n.drShiftTo(m,t),a!=u&&o.ZERO.subTo(t,t)),n.t=m,n.clamp(),p>0&&n.rShiftTo(p,n),a<0&&o.ZERO.subTo(n,n)}}},o.prototype.invDigit=function(){if(this.t<1)return 0;var e=this[0];if(!(1&e))return 0;var t=3&e;return(t=(t=(t=(t=t*(2-(15&e)*t)&15)*(2-(255&e)*t)&255)*(2-((65535&e)*t&65535))&65535)*(2-e*t%this.DV)%this.DV)>0?this.DV-t:-t},o.prototype.isEven=function(){return 0==(this.t>0?1&this[0]:this.s)},o.prototype.exp=function(e,t){if(e>4294967295||e<1)return o.ONE;var n=r(),s=r(),i=t.convert(this),c=l(e)-1;for(i.copyTo(n);--c>=0;)if(t.sqrTo(n,s),(e&1<<c)>0)t.mulTo(s,i,n);else{var a=n;n=s,s=a}return t.revert(n)},o.prototype.toString=function(e){if(this.s<0)return"-"+this.negate().toString(e);var t;if(16==e)t=4;else if(8==e)t=3;else if(2==e)t=1;else if(32==e)t=5;else{if(4!=e)return this.toRadix(e);t=2}var o,r=(1<<t)-1,n=!1,s="",i=this.t,c=this.DB-i*this.DB%t;if(i-- >0)for(c<this.DB&&(o=this[i]>>c)>0&&(n=!0,s=a(o));i>=0;)c<t?(o=(this[i]&(1<<c)-1)<<t-c,o|=this[--i]>>(c+=this.DB-t)):(o=this[i]>>(c-=t)&r,c<=0&&(c+=this.DB,--i)),o>0&&(n=!0),n&&(s+=a(o));return n?s:"0"},o.prototype.negate=function(){var e=r();return o.ZERO.subTo(this,e),e},o.prototype.abs=function(){return this.s<0?this.negate():this},o.prototype.compareTo=function(e){var t=this.s-e.s;if(0!=t)return t;var o=this.t;if(0!=(t=o-e.t))return this.s<0?-t:t;for(;--o>=0;)if(0!=(t=this[o]-e[o]))return t;return 0},o.prototype.bitLength=function(){return this.t<=0?0:this.DB*(this.t-1)+l(this[this.t-1]^this.s&this.DM)},o.prototype.mod=function(e){var t=r();return this.abs().divRemTo(e,null,t),this.s<0&&t.compareTo(o.ZERO)>0&&e.subTo(t,t),t},o.prototype.modPowInt=function(e,t){var o;return o=e<256||t.isEven()?new m(t):new g(t),this.exp(e,o)},o.ZERO=p(0),o.ONE=p(1),v.prototype.convert=w,v.prototype.revert=w,v.prototype.mulTo=function(e,t,o){e.multiplyTo(t,o)},v.prototype.sqrTo=function(e,t){e.squareTo(t)},T.prototype.convert=function(e){if(e.s<0||e.t>2*this.m.t)return e.mod(this.m);if(e.compareTo(this.m)<0)return e;var t=r();return e.copyTo(t),this.reduce(t),t},T.prototype.revert=function(e){return e},T.prototype.reduce=function(e){for(e.drShiftTo(this.m.t-1,this.r2),e.t>this.m.t+1&&(e.t=this.m.t+1,e.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);e.compareTo(this.r2)<0;)e.dAddOffset(1,this.m.t+1);for(e.subTo(this.r2,e);e.compareTo(this.m)>=0;)e.subTo(this.m,e)},T.prototype.mulTo=function(e,t,o){e.multiplyTo(t,o),this.reduce(o)},T.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)};var B,S,E,I=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],A=(1<<26)/I[I.length-1];function q(){var e;e=(new Date).getTime(),S[E++]^=255&e,S[E++]^=e>>8&255,S[E++]^=e>>16&255,S[E++]^=e>>24&255,E>=$&&(E-=$)}if(o.prototype.chunkSize=function(e){return Math.floor(Math.LN2*this.DB/Math.log(e))},o.prototype.toRadix=function(e){if(null==e&&(e=10),0==this.signum()||e<2||e>36)return"0";var t=this.chunkSize(e),o=Math.pow(e,t),n=p(o),s=r(),i=r(),c="";for(this.divRemTo(n,s,i);s.signum()>0;)c=(o+i.intValue()).toString(e).substr(1)+c,s.divRemTo(n,s,i);return i.intValue().toString(e)+c},o.prototype.fromRadix=function(e,t){this.fromInt(0),null==t&&(t=10);for(var r=this.chunkSize(t),n=Math.pow(t,r),s=!1,i=0,c=0,a=0;a<e.length;++a){var p=u(e,a);p<0?"-"==e.charAt(a)&&0==this.signum()&&(s=!0):(c=t*c+p,++i>=r&&(this.dMultiply(n),this.dAddOffset(c,0),i=0,c=0))}i>0&&(this.dMultiply(Math.pow(t,i)),this.dAddOffset(c,0)),s&&o.ZERO.subTo(this,this)},o.prototype.fromNumber=function(e,t,r){if("number"==typeof t)if(e<2)this.fromInt(1);else for(this.fromNumber(e,r),this.testBit(e-1)||this.bitwiseTo(o.ONE.shiftLeft(e-1),d,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(t);)this.dAddOffset(2,0),this.bitLength()>e&&this.subTo(o.ONE.shiftLeft(e-1),this);else{var n=new Array,s=7&e;n.length=1+(e>>3),t.nextBytes(n),s>0?n[0]&=(1<<s)-1:n[0]=0,this.fromString(n,256)}},o.prototype.bitwiseTo=function(e,t,o){var r,n,s=Math.min(e.t,this.t);for(r=0;r<s;++r)o[r]=t(this[r],e[r]);if(e.t<this.t){for(n=e.s&this.DM,r=s;r<this.t;++r)o[r]=t(this[r],n);o.t=this.t}else{for(n=this.s&this.DM,r=s;r<e.t;++r)o[r]=t(n,e[r]);o.t=e.t}o.s=t(this.s,e.s),o.clamp()},o.prototype.changeBit=function(e,t){var r=o.ONE.shiftLeft(e);return this.bitwiseTo(r,t,r),r},o.prototype.addTo=function(e,t){for(var o=0,r=0,n=Math.min(e.t,this.t);o<n;)r+=this[o]+e[o],t[o++]=r&this.DM,r>>=this.DB;if(e.t<this.t){for(r+=e.s;o<this.t;)r+=this[o],t[o++]=r&this.DM,r>>=this.DB;r+=this.s}else{for(r+=this.s;o<e.t;)r+=e[o],t[o++]=r&this.DM,r>>=this.DB;r+=e.s}t.s=r<0?-1:0,r>0?t[o++]=r:r<-1&&(t[o++]=this.DV+r),t.t=o,t.clamp()},o.prototype.dMultiply=function(e){this[this.t]=this.am(0,e-1,this,0,0,this.t),++this.t,this.clamp()},o.prototype.dAddOffset=function(e,t){if(0!=e){for(;this.t<=t;)this[this.t++]=0;for(this[t]+=e;this[t]>=this.DV;)this[t]-=this.DV,++t>=this.t&&(this[this.t++]=0),++this[t]}},o.prototype.multiplyLowerTo=function(e,t,o){var r,n=Math.min(this.t+e.t,t);for(o.s=0,o.t=n;n>0;)o[--n]=0;for(r=o.t-this.t;n<r;++n)o[n+this.t]=this.am(0,e[n],o,n,0,this.t);for(r=Math.min(e.t,t);n<r;++n)this.am(0,e[n],o,n,0,t-n);o.clamp()},o.prototype.multiplyUpperTo=function(e,t,o){--t;var r=o.t=this.t+e.t-t;for(o.s=0;--r>=0;)o[r]=0;for(r=Math.max(t-this.t,0);r<e.t;++r)o[this.t+r-t]=this.am(t-r,e[r],o,0,0,this.t+r-t);o.clamp(),o.drShiftTo(1,o)},o.prototype.modInt=function(e){if(e<=0)return 0;var t=this.DV%e,o=this.s<0?e-1:0;if(this.t>0)if(0==t)o=this[0]%e;else for(var r=this.t-1;r>=0;--r)o=(t*o+this[r])%e;return o},o.prototype.millerRabin=function(e){var t=this.subtract(o.ONE),n=t.getLowestSetBit();if(n<=0)return!1;var s=t.shiftRight(n);(e=e+1>>1)>I.length&&(e=I.length);for(var i=r(),c=0;c<e;++c){i.fromInt(I[Math.floor(Math.random()*I.length)]);var a=i.modPow(s,this);if(0!=a.compareTo(o.ONE)&&0!=a.compareTo(t)){for(var u=1;u++<n&&0!=a.compareTo(t);)if(0==(a=a.modPowInt(2,this)).compareTo(o.ONE))return!1;if(0!=a.compareTo(t))return!1}}return!0},o.prototype.clone=function(){var e=r();return this.copyTo(e),e},o.prototype.intValue=function(){if(this.s<0){if(1==this.t)return this[0]-this.DV;if(0==this.t)return-1}else{if(1==this.t)return this[0];if(0==this.t)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]},o.prototype.byteValue=function(){return 0==this.t?this.s:this[0]<<24>>24},o.prototype.shortValue=function(){return 0==this.t?this.s:this[0]<<16>>16},o.prototype.signum=function(){return this.s<0?-1:this.t<=0||1==this.t&&this[0]<=0?0:1},o.prototype.toByteArray=function(){var e=this.t,t=new Array;t[0]=this.s;var o,r=this.DB-e*this.DB%8,n=0;if(e-- >0)for(r<this.DB&&(o=this[e]>>r)!=(this.s&this.DM)>>r&&(t[n++]=o|this.s<<this.DB-r);e>=0;)r<8?(o=(this[e]&(1<<r)-1)<<8-r,o|=this[--e]>>(r+=this.DB-8)):(o=this[e]>>(r-=8)&255,r<=0&&(r+=this.DB,--e)),128&o&&(o|=-256),0==n&&(128&this.s)!=(128&o)&&++n,(n>0||o!=this.s)&&(t[n++]=o);return t},o.prototype.equals=function(e){return 0==this.compareTo(e)},o.prototype.min=function(e){return this.compareTo(e)<0?this:e},o.prototype.max=function(e){return this.compareTo(e)>0?this:e},o.prototype.and=function(e){var t=r();return this.bitwiseTo(e,f,t),t},o.prototype.or=function(e){var t=r();return this.bitwiseTo(e,d,t),t},o.prototype.xor=function(e){var t=r();return this.bitwiseTo(e,h,t),t},o.prototype.andNot=function(e){var t=r();return this.bitwiseTo(e,b,t),t},o.prototype.not=function(){for(var e=r(),t=0;t<this.t;++t)e[t]=this.DM&~this[t];return e.t=this.t,e.s=~this.s,e},o.prototype.shiftLeft=function(e){var t=r();return e<0?this.rShiftTo(-e,t):this.lShiftTo(e,t),t},o.prototype.shiftRight=function(e){var t=r();return e<0?this.lShiftTo(-e,t):this.rShiftTo(e,t),t},o.prototype.getLowestSetBit=function(){for(var e=0;e<this.t;++e)if(0!=this[e])return e*this.DB+y(this[e]);return this.s<0?this.t*this.DB:-1},o.prototype.bitCount=function(){for(var e=0,t=this.s&this.DM,o=0;o<this.t;++o)e+=C(this[o]^t);return e},o.prototype.testBit=function(e){var t=Math.floor(e/this.DB);return t>=this.t?0!=this.s:!!(this[t]&1<<e%this.DB)},o.prototype.setBit=function(e){return this.changeBit(e,d)},o.prototype.clearBit=function(e){return this.changeBit(e,b)},o.prototype.flipBit=function(e){return this.changeBit(e,h)},o.prototype.add=function(e){var t=r();return this.addTo(e,t),t},o.prototype.subtract=function(e){var t=r();return this.subTo(e,t),t},o.prototype.multiply=function(e){var t=r();return this.multiplyTo(e,t),t},o.prototype.divide=function(e){var t=r();return this.divRemTo(e,t,null),t},o.prototype.remainder=function(e){var t=r();return this.divRemTo(e,null,t),t},o.prototype.divideAndRemainder=function(e){var t=r(),o=r();return this.divRemTo(e,t,o),new Array(t,o)},o.prototype.modPow=function(e,t){var o,n,s=e.bitLength(),i=p(1);if(s<=0)return i;o=s<18?1:s<48?3:s<144?4:s<768?5:6,n=s<8?new m(t):t.isEven()?new T(t):new g(t);var c=new Array,a=3,u=o-1,f=(1<<o)-1;if(c[1]=n.convert(this),o>1){var d=r();for(n.sqrTo(c[1],d);a<=f;)c[a]=r(),n.mulTo(d,c[a-2],c[a]),a+=2}var h,b,y=e.t-1,C=!0,v=r();for(s=l(e[y])-1;y>=0;){for(s>=u?h=e[y]>>s-u&f:(h=(e[y]&(1<<s+1)-1)<<u-s,y>0&&(h|=e[y-1]>>this.DB+s-u)),a=o;!(1&h);)h>>=1,--a;if((s-=a)<0&&(s+=this.DB,--y),C)c[h].copyTo(i),C=!1;else{for(;a>1;)n.sqrTo(i,v),n.sqrTo(v,i),a-=2;a>0?n.sqrTo(i,v):(b=i,i=v,v=b),n.mulTo(v,c[h],i)}for(;y>=0&&!(e[y]&1<<s);)n.sqrTo(i,v),b=i,i=v,v=b,--s<0&&(s=this.DB-1,--y)}return n.revert(i)},o.prototype.modInverse=function(e){var t=e.isEven();if(this.isEven()&&t||0==e.signum())return o.ZERO;for(var r=e.clone(),n=this.clone(),s=p(1),i=p(0),c=p(0),a=p(1);0!=r.signum();){for(;r.isEven();)r.rShiftTo(1,r),t?(s.isEven()&&i.isEven()||(s.addTo(this,s),i.subTo(e,i)),s.rShiftTo(1,s)):i.isEven()||i.subTo(e,i),i.rShiftTo(1,i);for(;n.isEven();)n.rShiftTo(1,n),t?(c.isEven()&&a.isEven()||(c.addTo(this,c),a.subTo(e,a)),c.rShiftTo(1,c)):a.isEven()||a.subTo(e,a),a.rShiftTo(1,a);r.compareTo(n)>=0?(r.subTo(n,r),t&&s.subTo(c,s),i.subTo(a,i)):(n.subTo(r,n),t&&c.subTo(s,c),a.subTo(i,a))}return 0!=n.compareTo(o.ONE)?o.ZERO:a.compareTo(e)>=0?a.subtract(e):a.signum()<0?(a.addTo(e,a),a.signum()<0?a.add(e):a):a},o.prototype.pow=function(e){return this.exp(e,new v)},o.prototype.gcd=function(e){var t=this.s<0?this.negate():this.clone(),o=e.s<0?e.negate():e.clone();if(t.compareTo(o)<0){var r=t;t=o,o=r}var n=t.getLowestSetBit(),s=o.getLowestSetBit();if(s<0)return t;for(n<s&&(s=n),s>0&&(t.rShiftTo(s,t),o.rShiftTo(s,o));t.signum()>0;)(n=t.getLowestSetBit())>0&&t.rShiftTo(n,t),(n=o.getLowestSetBit())>0&&o.rShiftTo(n,o),t.compareTo(o)>=0?(t.subTo(o,t),t.rShiftTo(1,t)):(o.subTo(t,o),o.rShiftTo(1,o));return s>0&&o.lShiftTo(s,o),o},o.prototype.isProbablePrime=function(e){var t,o=this.abs();if(1==o.t&&o[0]<=I[I.length-1]){for(t=0;t<I.length;++t)if(o[0]==I[t])return!0;return!1}if(o.isEven())return!1;for(t=1;t<I.length;){for(var r=I[t],n=t+1;n<I.length&&r<A;)r*=I[n++];for(r=o.modInt(r);t<n;)if(r%I[t++]==0)return!1}return o.millerRabin(e)},o.prototype.square=function(){var e=r();return this.squareTo(e),e},o.prototype.Barrett=T,null==S){var F;if(S=new Array,E=0,"undefined"!=typeof window&&window.crypto)if(window.crypto.getRandomValues){var P=new Uint8Array(32);for(window.crypto.getRandomValues(P),F=0;F<32;++F)S[E++]=P[F]}else if("Netscape"==navigator.appName&&navigator.appVersion<"5"){var k=window.crypto.random(32);for(F=0;F<k.length;++F)S[E++]=255&k.charCodeAt(F)}for(;E<$;)F=Math.floor(65536*Math.random()),S[E++]=F>>>8,S[E++]=255&F;E=0,q()}function D(){if(null==B){for(q(),(B=new N).init(S),E=0;E<S.length;++E)S[E]=0;E=0}return B.next()}function x(){}function N(){this.i=0,this.j=0,this.S=new Array}x.prototype.nextBytes=function(e){var t;for(t=0;t<e.length;++t)e[t]=D()},N.prototype.init=function(e){var t,o,r;for(t=0;t<256;++t)this.S[t]=t;for(o=0,t=0;t<256;++t)o=o+this.S[t]+e[t%e.length]&255,r=this.S[t],this.S[t]=this.S[o],this.S[o]=r;this.i=0,this.j=0},N.prototype.next=function(){var e;return this.i=this.i+1&255,this.j=this.j+this.S[this.i]&255,e=this.S[this.i],this.S[this.i]=this.S[this.j],this.S[this.j]=e,this.S[e+this.S[this.i]&255]};var $=256;e.exports={default:o,BigInteger:o,SecureRandom:x}}.call(jsbn)),jsbn$1.exports;var e}function requireAsn1(){if(hasRequiredAsn1)return asn1;hasRequiredAsn1=1;const{BigInteger:e}=requireJsbn();class t{constructor(){this.tlv=null,this.t="00",this.l="00",this.v=""}getEncodedHex(){return this.tlv||(this.v=this.getValue(),this.l=this.getLength(),this.tlv=this.t+this.l+this.v),this.tlv}getLength(){const e=this.v.length/2;let t=e.toString(16);if(t.length%2==1&&(t="0"+t),e<128)return t;return(128+t.length/2).toString(16)+t}getValue(){return""}}class o extends t{constructor(t){super(),this.t="02",t&&(this.v=function(t){let o=t.toString(16);if("-"!==o[0])o.length%2==1?o="0"+o:o.match(/^[0-7]/)||(o="00"+o);else{o=o.substr(1);let r=o.length;r%2==1?r+=1:o.match(/^[0-7]/)||(r+=2);let n="";for(let e=0;e<r;e++)n+="f";n=new e(n,16),o=n.xor(t).add(e.ONE),o=o.toString(16).replace(/^-/,"")}return o}(t))}getValue(){return this.v}}class r extends t{constructor(e){super(),this.t="30",this.asn1Array=e}getValue(){return this.v=this.asn1Array.map(e=>e.getEncodedHex()).join(""),this.v}}function n(e,t){return+e[t+2]<8?1:128&+e.substr(t+2,2)}function s(t,o){const r=n(t,o),s=t.substr(o+2,2*r);if(!s)return-1;return(+s[0]<8?new e(s,16):new e(s.substr(2),16)).intValue()}function i(e,t){return t+2*(n(e,t)+1)}return asn1={encodeDer(e,t){const n=new o(e),s=new o(t);return new r([n,s]).getEncodedHex()},decodeDer(t){const o=i(t,0),r=i(t,o),n=s(t,o),c=t.substr(r,2*n),a=r+c.length,u=i(t,a),p=s(t,a),l=t.substr(u,2*p);return{r:new e(c,16),s:new e(l,16)}}}}function requireEc(){if(hasRequiredEc)return ec;hasRequiredEc=1;const{BigInteger:e}=requireJsbn(),t=new e("2"),o=new e("3");class r{constructor(e,t){this.x=t,this.q=e}equals(e){return e===this||this.q.equals(e.q)&&this.x.equals(e.x)}toBigInteger(){return this.x}negate(){return new r(this.q,this.x.negate().mod(this.q))}add(e){return new r(this.q,this.x.add(e.toBigInteger()).mod(this.q))}subtract(e){return new r(this.q,this.x.subtract(e.toBigInteger()).mod(this.q))}multiply(e){return new r(this.q,this.x.multiply(e.toBigInteger()).mod(this.q))}divide(e){return new r(this.q,this.x.multiply(e.toBigInteger().modInverse(this.q)).mod(this.q))}square(){return new r(this.q,this.x.square().mod(this.q))}}class n{constructor(t,o,r,n){this.curve=t,this.x=o,this.y=r,this.z=null==n?e.ONE:n,this.zinv=null}getX(){return null===this.zinv&&(this.zinv=this.z.modInverse(this.curve.q)),this.curve.fromBigInteger(this.x.toBigInteger().multiply(this.zinv).mod(this.curve.q))}getY(){return null===this.zinv&&(this.zinv=this.z.modInverse(this.curve.q)),this.curve.fromBigInteger(this.y.toBigInteger().multiply(this.zinv).mod(this.curve.q))}equals(t){if(t===this)return!0;if(this.isInfinity())return t.isInfinity();if(t.isInfinity())return this.isInfinity();if(!t.y.toBigInteger().multiply(this.z).subtract(this.y.toBigInteger().multiply(t.z)).mod(this.curve.q).equals(e.ZERO))return!1;return t.x.toBigInteger().multiply(this.z).subtract(this.x.toBigInteger().multiply(t.z)).mod(this.curve.q).equals(e.ZERO)}isInfinity(){return null===this.x&&null===this.y||this.z.equals(e.ZERO)&&!this.y.toBigInteger().equals(e.ZERO)}negate(){return new n(this.curve,this.x,this.y.negate(),this.z)}add(t){if(this.isInfinity())return t;if(t.isInfinity())return this;const o=this.x.toBigInteger(),r=this.y.toBigInteger(),s=this.z,i=t.x.toBigInteger(),c=t.y.toBigInteger(),a=t.z,u=this.curve.q,p=o.multiply(a).mod(u),l=i.multiply(s).mod(u),m=p.subtract(l),g=r.multiply(a).mod(u),f=c.multiply(s).mod(u),d=g.subtract(f);if(e.ZERO.equals(m))return e.ZERO.equals(d)?this.twice():this.curve.infinity;const h=p.add(l),b=s.multiply(a).mod(u),y=m.square().mod(u),C=m.multiply(y).mod(u),v=b.multiply(d.square()).subtract(h.multiply(y)).mod(u),w=m.multiply(v).mod(u),T=d.multiply(y.multiply(p).subtract(v)).subtract(g.multiply(C)).mod(u),B=C.multiply(b).mod(u);return new n(this.curve,this.curve.fromBigInteger(w),this.curve.fromBigInteger(T),B)}twice(){if(this.isInfinity())return this;if(!this.y.toBigInteger().signum())return this.curve.infinity;const e=this.x.toBigInteger(),t=this.y.toBigInteger(),r=this.z,s=this.curve.q,i=this.curve.a.toBigInteger(),c=e.square().multiply(o).add(i.multiply(r.square())).mod(s),a=t.shiftLeft(1).multiply(r).mod(s),u=t.square().mod(s),p=u.multiply(e).multiply(r).mod(s),l=a.square().mod(s),m=c.square().subtract(p.shiftLeft(3)).mod(s),g=a.multiply(m).mod(s),f=c.multiply(p.shiftLeft(2).subtract(m)).subtract(l.shiftLeft(1).multiply(u)).mod(s),d=a.multiply(l).mod(s);return new n(this.curve,this.curve.fromBigInteger(g),this.curve.fromBigInteger(f),d)}multiply(e){if(this.isInfinity())return this;if(!e.signum())return this.curve.infinity;const t=e.multiply(o),r=this.negate();let n=this;for(let o=t.bitLength()-2;o>0;o--){n=n.twice();const s=t.testBit(o);s!==e.testBit(o)&&(n=n.add(s?this:r))}return n}}return ec={ECPointFp:n,ECCurveFp:class{constructor(e,t,o){this.q=e,this.a=this.fromBigInteger(t),this.b=this.fromBigInteger(o),this.infinity=new n(this,null,null)}equals(e){return e===this||this.q.equals(e.q)&&this.a.equals(e.a)&&this.b.equals(e.b)}fromBigInteger(e){return new r(this.q,e)}decodePointHex(o){switch(parseInt(o.substr(0,2),16)){case 0:return this.infinity;case 2:case 3:const r=this.fromBigInteger(new e(o.substr(2),16));let s=this.fromBigInteger(r.multiply(r.square()).add(r.multiply(this.a)).add(this.b).toBigInteger().modPow(this.q.divide(new e("4")).add(e.ONE),this.q));return s.toBigInteger().mod(t).equals(new e(o.substr(0,2),16).subtract(t))||(s=s.negate()),new n(this,r,s);case 4:case 6:case 7:const i=(o.length-2)/2,c=o.substr(2,i),a=o.substr(i+2,i);return new n(this,this.fromBigInteger(new e(c,16)),this.fromBigInteger(new e(a,16)));default:return null}}}}}function requireUtils(){if(hasRequiredUtils)return utils$1;hasRequiredUtils=1;const{BigInteger:e,SecureRandom:t}=requireJsbn(),{ECCurveFp:o}=requireEc(),r=new t,{curve:n,G:s,n:i}=c();function c(){const t=new e("FFFFFFFEFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF00000000FFFFFFFFFFFFFFFF",16),r=new e("FFFFFFFEFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF00000000FFFFFFFFFFFFFFFC",16),n=new e("28E9FA9E9D9F5E344D5A9E4BCF6509A7F39789F515AB8F92DDBCBD414D940E93",16),s=new o(t,r,n),i=s.decodePointHex("0432C4AE2C1F1981195F9904466A39C9948FE30BBFF2660BE1715A4589334C74C7BC3736A2F4F6779C59BDCEE36B692153D0A9877CC62A474002DF32E52139F0A0");return{curve:s,G:i,n:new e("FFFFFFFEFFFFFFFFFFFFFFFFFFFFFFFF7203DF6B21C6052B53BBF40939D54123",16)}}function a(e,t){return e.length>=t?e:new Array(t-e.length+1).join("0")+e}return utils$1={getGlobalCurve:function(){return n},generateEcparam:c,generateKeyPairHex:function(t,o,n){const c=(t?new e(t,o,n):new e(i.bitLength(),r)).mod(i.subtract(e.ONE)).add(e.ONE),u=a(c.toString(16),64),p=s.multiply(c);return{privateKey:u,publicKey:"04"+a(p.getX().toBigInteger().toString(16),64)+a(p.getY().toBigInteger().toString(16),64)}},compressPublicKeyHex:function(t){if(130!==t.length)throw new Error("Invalid public key to compress");const o=(t.length-2)/2,r=t.substr(2,o);let n="03";return new e(t.substr(o+2,o),16).mod(new e("2")).equals(e.ZERO)&&(n="02"),n+r},utf8ToHex:function(e){const t=(e=unescape(encodeURIComponent(e))).length,o=[];for(let r=0;r<t;r++)o[r>>>2]|=(255&e.charCodeAt(r))<<24-r%4*8;const r=[];for(let e=0;e<t;e++){const t=o[e>>>2]>>>24-e%4*8&255;r.push((t>>>4).toString(16)),r.push((15&t).toString(16))}return r.join("")},leftPad:a,arrayToHex:function(e){return e.map(e=>1===(e=e.toString(16)).length?"0"+e:e).join("")},arrayToUtf8:function(e){const t=[];let o=0;for(let r=0;r<2*e.length;r+=2)t[r>>>3]|=parseInt(e[o],10)<<24-r%8*4,o++;try{const o=[];for(let r=0;r<e.length;r++){const e=t[r>>>2]>>>24-r%4*8&255;o.push(String.fromCharCode(e))}return decodeURIComponent(escape(o.join("")))}catch(e){throw new Error("Malformed UTF-8 data")}},hexToArray:function(e){const t=[];let o=e.length;o%2!=0&&(e=a(e,o+1)),o=e.length;for(let r=0;r<o;r+=2)t.push(parseInt(e.substr(r,2),16));return t},verifyPublicKey:function(e){const t=n.decodePointHex(e);if(!t)return!1;const o=t.getX();return t.getY().square().equals(o.multiply(o.square()).add(o.multiply(n.a)).add(n.b))},comparePublicKeyHex:function(e,t){const o=n.decodePointHex(e);if(!o)return!1;const r=n.decodePointHex(t);return!!r&&o.equals(r)}}}function requireSm3$1(){if(hasRequiredSm3$1)return sm3_1$1;hasRequiredSm3$1=1;const e=new Uint32Array(68),t=new Uint32Array(64);function o(e,t){const o=31&t;return e<<o|e>>>32-o}function r(e,t){const o=[];for(let r=e.length-1;r>=0;r--)o[r]=255&(e[r]^t[r]);return o}function n(e){return e^o(e,9)^o(e,17)}function s(e){return e^o(e,15)^o(e,23)}function i(r){let i=8*r.length,c=i%512;c=c>=448?512-c%448-1:448-c-1;const a=new Array((c-7)/8),u=new Array(8);for(let e=0,t=a.length;e<t;e++)a[e]=0;for(let e=0,t=u.length;e<t;e++)u[e]=0;i=i.toString(2);for(let e=7;e>=0;e--)if(i.length>8){const t=i.length-8;u[e]=parseInt(i.substr(t),2),i=i.substr(0,t)}else i.length>0&&(u[e]=parseInt(i,2),i="");const p=new Uint8Array([...r,128,...a,...u]),l=new DataView(p.buffer,0),m=p.length/64,g=new Uint32Array([1937774191,1226093241,388252375,3666478592,2842636476,372324522,3817729613,2969243214]);for(let r=0;r<m;r++){e.fill(0),t.fill(0);const i=16*r;for(let t=0;t<16;t++)e[t]=l.getUint32(4*(i+t),!1);for(let t=16;t<68;t++)e[t]=s(e[t-16]^e[t-9]^o(e[t-3],15))^o(e[t-13],7)^e[t-6];for(let o=0;o<64;o++)t[o]=e[o]^e[o+4];const c=2043430169,a=2055708042;let u,p,m,f,d,h=g[0],b=g[1],y=g[2],C=g[3],v=g[4],w=g[5],T=g[6],B=g[7];for(let r=0;r<64;r++)d=r>=0&&r<=15?c:a,u=o(o(h,12)+v+o(d,r),7),p=u^o(h,12),m=(r>=0&&r<=15?h^b^y:h&b|h&y|b&y)+C+p+t[r],f=(r>=0&&r<=15?v^w^T:v&w|~v&T)+B+u+e[r],C=y,y=o(b,9),b=h,h=m,B=T,T=o(w,19),w=v,v=n(f);g[0]^=h,g[1]^=b,g[2]^=y,g[3]^=C,g[4]^=v,g[5]^=w,g[6]^=T,g[7]^=B}const f=[];for(let e=0,t=g.length;e<t;e++){const t=g[e];f.push((4278190080&t)>>>24,(16711680&t)>>>16,(65280&t)>>>8,255&t)}return f}const c=new Uint8Array(64),a=new Uint8Array(64);for(let e=0;e<64;e++)c[e]=54,a[e]=92;return sm3_1$1={sm3:i,hmac:function(e,t){for(t.length>64&&(t=i(t));t.length<64;)t.push(0);const o=r(t,c),n=r(t,a),s=i([...o,...e]);return i([...n,...s])}}}function requireSm2(){if(hasRequiredSm2)return sm2$1;hasRequiredSm2=1;const{BigInteger:e}=requireJsbn(),{encodeDer:t,decodeDer:o}=requireAsn1(),r=requireUtils(),n=requireSm3$1().sm3,{G:s,curve:i,n:c}=r.generateEcparam();function a(e,t,o="1234567812345678"){o=r.utf8ToHex(o);const i=r.leftPad(s.curve.a.toBigInteger().toRadix(16),64),c=r.leftPad(s.curve.b.toBigInteger().toRadix(16),64),a=r.leftPad(s.getX().toBigInteger().toRadix(16),64),u=r.leftPad(s.getY().toBigInteger().toRadix(16),64);let p,l;if(128===t.length)p=t.substr(0,64),l=t.substr(64,64);else{const e=s.curve.decodePointHex(t);p=r.leftPad(e.getX().toBigInteger().toRadix(16),64),l=r.leftPad(e.getY().toBigInteger().toRadix(16),64)}const m=r.hexToArray(o+i+c+a+u+p+l),g=4*o.length;m.unshift(255&g),m.unshift(g>>8&255);const f=n(m);return r.arrayToHex(n(f.concat(r.hexToArray(e))))}function u(t){const o=s.multiply(new e(t,16));return"04"+r.leftPad(o.getX().toBigInteger().toString(16),64)+r.leftPad(o.getY().toBigInteger().toString(16),64)}function p(){const t=r.generateKeyPairHex(),o=i.decodePointHex(t.publicKey);return t.k=new e(t.privateKey,16),t.x1=o.getX().toBigInteger(),t}return sm2$1={generateKeyPairHex:r.generateKeyPairHex,compressPublicKeyHex:r.compressPublicKeyHex,comparePublicKeyHex:r.comparePublicKeyHex,doEncrypt:function(t,o,s=1){t="string"==typeof t?r.hexToArray(r.utf8ToHex(t)):Array.prototype.slice.call(t),o=r.getGlobalCurve().decodePointHex(o);const i=r.generateKeyPairHex(),c=new e(i.privateKey,16);let a=i.publicKey;a.length>128&&(a=a.substr(a.length-128));const u=o.multiply(c),p=r.hexToArray(r.leftPad(u.getX().toBigInteger().toRadix(16),64)),l=r.hexToArray(r.leftPad(u.getY().toBigInteger().toRadix(16),64)),m=r.arrayToHex(n([].concat(p,t,l)));let g=1,f=0,d=[];const h=[].concat(p,l),b=()=>{d=n([...h,g>>24&255,g>>16&255,g>>8&255,255&g]),g++,f=0};b();for(let e=0,o=t.length;e<o;e++)f===d.length&&b(),t[e]^=255&d[f++];const y=r.arrayToHex(t);return 0===s?a+y+m:a+m+y},doDecrypt:function(t,o,s=1,{output:i="string"}={}){o=new e(o,16);let c=t.substr(128,64),a=t.substr(192);0===s&&(c=t.substr(t.length-64),a=t.substr(128,t.length-128-64));const u=r.hexToArray(a),p=r.getGlobalCurve().decodePointHex("04"+t.substr(0,128)).multiply(o),l=r.hexToArray(r.leftPad(p.getX().toBigInteger().toRadix(16),64)),m=r.hexToArray(r.leftPad(p.getY().toBigInteger().toRadix(16),64));let g=1,f=0,d=[];const h=[].concat(l,m),b=()=>{d=n([...h,g>>24&255,g>>16&255,g>>8&255,255&g]),g++,f=0};b();for(let e=0,t=u.length;e<t;e++)f===d.length&&b(),u[e]^=255&d[f++];return r.arrayToHex(n([].concat(l,u,m)))===c.toLowerCase()?"array"===i?u:r.arrayToUtf8(u):"array"===i?[]:""},doSignature:function(o,n,{pointPool:s,der:i,hash:l,publicKey:m,userId:g}={}){let f="string"==typeof o?r.utf8ToHex(o):r.arrayToHex(o);l&&(f=a(f,m=m||u(n),g));const d=new e(n,16),h=new e(f,16);let b=null,y=null,C=null;do{do{let e;e=s&&s.length?s.pop():p(),b=e.k,y=h.add(e.x1).mod(c)}while(y.equals(e.ZERO)||y.add(b).equals(c));C=d.add(e.ONE).modInverse(c).multiply(b.subtract(y.multiply(d))).mod(c)}while(C.equals(e.ZERO));return i?t(y,C):r.leftPad(y.toString(16),64)+r.leftPad(C.toString(16),64)},doVerifySignature:function(t,n,u,{der:p,hash:l,userId:m}={}){let g,f,d="string"==typeof t?r.utf8ToHex(t):r.arrayToHex(t);if(l&&(d=a(d,u,m)),p){const e=o(n);g=e.r,f=e.s}else g=new e(n.substring(0,64),16),f=new e(n.substring(64),16);const h=i.decodePointHex(u),b=new e(d,16),y=g.add(f).mod(c);if(y.equals(e.ZERO))return!1;const C=s.multiply(f).add(h.multiply(y)),v=b.add(C.getX().toBigInteger()).mod(c);return g.equals(v)},getPublicKeyFromPrivateKey:u,getPoint:p,verifyPublicKey:r.verifyPublicKey}}function requireSm3(){if(hasRequiredSm3)return sm3_1;hasRequiredSm3=1;const{sm3:e,hmac:t}=requireSm3$1();function o(e){return e.map(e=>1===(e=e.toString(16)).length?"0"+e:e).join("")}function r(e){const t=[];let o=e.length;var r,n;o%2!=0&&(n=o+1,e=(r=e).length>=n?r:new Array(n-r.length+1).join("0")+r),o=e.length;for(let r=0;r<o;r+=2)t.push(parseInt(e.substr(r,2),16));return t}return sm3_1=function(n,s){if(n="string"==typeof n?function(e){const t=[];for(let o=0,r=e.length;o<r;o++){const r=e.codePointAt(o);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>>6),t.push(128|63&r);else if(r<=55295||r>=57344&&r<=65535)t.push(224|r>>>12),t.push(128|r>>>6&63),t.push(128|63&r);else{if(!(r>=65536&&r<=1114111))throw t.push(r),new Error("input is not supported");o++,t.push(240|r>>>18&28),t.push(128|r>>>12&63),t.push(128|r>>>6&63),t.push(128|63&r)}}return t}(n):Array.prototype.slice.call(n),s){if("hmac"!==(s.mode||"hmac"))throw new Error("invalid mode");let e=s.key;if(!e)throw new Error("invalid key");return e="string"==typeof e?r(e):Array.prototype.slice.call(e),o(t(n,e))}return o(e(n))}}function requireSm4(){if(hasRequiredSm4)return sm4_1;hasRequiredSm4=1;const e=16,t=[214,144,233,254,204,225,61,183,22,182,20,194,40,251,44,5,43,103,154,118,42,190,4,195,170,68,19,38,73,134,6,153,156,66,80,244,145,239,152,122,51,84,11,67,237,207,172,98,228,179,28,169,201,8,232,149,128,223,148,250,117,143,63,166,71,7,167,252,243,115,23,186,131,89,60,25,230,133,79,168,104,107,129,178,113,100,218,139,248,235,15,75,112,86,157,53,30,36,14,94,99,88,209,162,37,34,124,59,1,33,120,135,212,0,70,87,159,211,39,82,76,54,2,231,160,196,200,158,234,191,138,210,64,199,56,181,163,247,242,206,249,97,21,161,224,174,93,164,155,52,26,85,173,147,50,48,245,140,177,227,29,246,226,46,130,102,202,96,192,41,35,171,13,83,78,111,213,219,55,69,222,253,142,47,3,255,106,114,109,108,91,81,141,27,175,146,187,221,188,127,17,217,92,65,31,16,90,216,10,193,49,136,165,205,123,189,45,116,208,18,184,229,180,176,137,105,151,74,12,150,119,126,101,185,241,9,197,110,198,132,24,240,125,236,58,220,77,32,121,238,95,62,215,203,57,72],o=[462357,472066609,943670861,1415275113,1886879365,2358483617,2830087869,3301692121,3773296373,4228057617,404694573,876298825,1347903077,1819507329,2291111581,2762715833,3234320085,3705924337,4177462797,337322537,808926789,1280531041,1752135293,2223739545,2695343797,3166948049,3638552301,4110090761,269950501,741554753,1213159005,1684763257];function r(e){const t=[];for(let o=0,r=e.length;o<r;o+=2)t.push(parseInt(e.substr(o,2),16));return t}function n(e,t){const o=31&t;return e<<o|e>>>32-o}function s(e){return(255&t[e>>>24&255])<<24|(255&t[e>>>16&255])<<16|(255&t[e>>>8&255])<<8|255&t[255&e]}function i(e){return e^n(e,2)^n(e,10)^n(e,18)^n(e,24)}function c(e){return e^n(e,13)^n(e,23)}function a(e,t,o){const r=new Array(4),n=new Array(4);for(let t=0;t<4;t++)n[0]=255&e[4*t],n[1]=255&e[4*t+1],n[2]=255&e[4*t+2],n[3]=255&e[4*t+3],r[t]=n[0]<<24|n[1]<<16|n[2]<<8|n[3];for(let e,t=0;t<32;t+=4)e=r[1]^r[2]^r[3]^o[t+0],r[0]^=i(s(e)),e=r[2]^r[3]^r[0]^o[t+1],r[1]^=i(s(e)),e=r[3]^r[0]^r[1]^o[t+2],r[2]^=i(s(e)),e=r[0]^r[1]^r[2]^o[t+3],r[3]^=i(s(e));for(let e=0;e<16;e+=4)t[e]=r[3-e/4]>>>24&255,t[e+1]=r[3-e/4]>>>16&255,t[e+2]=r[3-e/4]>>>8&255,t[e+3]=255&r[3-e/4]}function u(t,n,i,{padding:u="pkcs#7",mode:p,iv:l=[],output:m="string"}={}){if("cbc"===p&&("string"==typeof l&&(l=r(l)),16!==l.length))throw new Error("iv is invalid");if("string"==typeof n&&(n=r(n)),16!==n.length)throw new Error("key is invalid");if(t="string"==typeof t?0!==i?function(e){const t=[];for(let o=0,r=e.length;o<r;o++){const r=e.codePointAt(o);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>>6),t.push(128|63&r);else if(r<=55295||r>=57344&&r<=65535)t.push(224|r>>>12),t.push(128|r>>>6&63),t.push(128|63&r);else{if(!(r>=65536&&r<=1114111))throw t.push(r),new Error("input is not supported");o++,t.push(240|r>>>18&28),t.push(128|r>>>12&63),t.push(128|r>>>6&63),t.push(128|63&r)}}return t}(t):r(t):[...t],("pkcs#5"===u||"pkcs#7"===u)&&0!==i){const o=e-t.length%e;for(let e=0;e<o;e++)t.push(o)}const g=new Array(32);!function(e,t,r){const n=new Array(4),i=new Array(4);for(let t=0;t<4;t++)i[0]=255&e[0+4*t],i[1]=255&e[1+4*t],i[2]=255&e[2+4*t],i[3]=255&e[3+4*t],n[t]=i[0]<<24|i[1]<<16|i[2]<<8|i[3];n[0]^=2746333894,n[1]^=1453994832,n[2]^=1736282519,n[3]^=2993693404;for(let e,r=0;r<32;r+=4)e=n[1]^n[2]^n[3]^o[r+0],t[r+0]=n[0]^=c(s(e)),e=n[2]^n[3]^n[0]^o[r+1],t[r+1]=n[1]^=c(s(e)),e=n[3]^n[0]^n[1]^o[r+2],t[r+2]=n[2]^=c(s(e)),e=n[0]^n[1]^n[2]^o[r+3],t[r+3]=n[3]^=c(s(e));if(0===r)for(let e,o=0;o<16;o++)e=t[o],t[o]=t[31-o],t[31-o]=e}(n,g,i);const f=[];let d=l,h=t.length,b=0;for(;h>=e;){const o=t.slice(b,b+16),r=new Array(16);if("cbc"===p)for(let t=0;t<e;t++)0!==i&&(o[t]^=d[t]);a(o,r,g);for(let t=0;t<e;t++)"cbc"===p&&0===i&&(r[t]^=d[t]),f[b+t]=r[t];"cbc"===p&&(d=0!==i?r:o),h-=e,b+=e}if(("pkcs#5"===u||"pkcs#7"===u)&&0===i){const e=f.length,t=f[e-1];for(let o=1;o<=t;o++)if(f[e-o]!==t)throw new Error("padding is invalid");f.splice(e-t,t)}return"array"!==m?0!==i?f.map(e=>1===(e=e.toString(16)).length?"0"+e:e).join(""):function(e){const t=[];for(let o=0,r=e.length;o<r;o++)e[o]>=240&&e[o]<=247?(t.push(String.fromCodePoint(((7&e[o])<<18)+((63&e[o+1])<<12)+((63&e[o+2])<<6)+(63&e[o+3]))),o+=3):e[o]>=224&&e[o]<=239?(t.push(String.fromCodePoint(((15&e[o])<<12)+((63&e[o+1])<<6)+(63&e[o+2]))),o+=2):e[o]>=192&&e[o]<=223?(t.push(String.fromCodePoint(((31&e[o])<<6)+(63&e[o+1]))),o++):t.push(String.fromCodePoint(e[o]));return t.join("")}(f):f}return sm4_1={encrypt:(e,t,o)=>u(e,t,1,o),decrypt:(e,t,o)=>u(e,t,0,o)}}function requireSrc(){return hasRequiredSrc?src:(hasRequiredSrc=1,src={sm2:requireSm2(),sm3:requireSm3(),sm4:requireSm4()})}var srcExports=requireSrc(),smCrypto=getDefaultExportFromCjs(srcExports);const{sm2:sm2,sm3:sm3,sm4:sm4}=smCrypto;let T="",U="";const utils={encryptBodyData(e,t){let o;return o="[object Object]"===Object.prototype.toString.call(t)?JSON.stringify(t):t,sm4.encrypt(o,e)},encryptSm4jsDataCBC(e,t){let o;return t?T=t:(T=T||utils.uuid(32,16,2),U=T),o="[object Object]"===Object.prototype.toString.call(e)?JSON.stringify(e):e,new sm4$1({key:T,mode:"cbc",iv:T.substring(0,8)+T.substring(T.length-8,T.length),cipherType:"base64"}).encrypt(o)},encryptData(e,t){let o,r="",n=t;r=""!==e&&null!=e?e:T,o="[object Object]"===Object.prototype.toString.call(r)?JSON.stringify(r):r;let s=sm2.doEncrypt(utils.stringToHex(o),n,1);return""!=s&&null!=s&&(s="04"+s),s},doDecrypt(e){let t=E.a.getters.getRequestCyu;if(null==e)return;if(""==e)return;if("04"!=e.substr(0,2))return;e=e.substr(2).toLowerCase();let o=Q.doDecrypt(e,t.privateKey.toLowerCase(),1),r=V.hexToString(o);return JSON.parse(r)},doDecrypt1(e){if(null!=e&&""!=e)return e=e.substr(2).toLowerCase(),sm2.doDecrypt(e,"67d33d3457bcc018920cf54bdeb4c94c08fee7649b0779d6ada36ff34563150b",1)},doDecryptSm4jsDataCBC(e,t){return t||(t=U),null==e||""==e?this.responseDecryptoError():new sm4$1({key:t,mode:"cbc",iv:t.substring(0,8)+t.substring(t.length-8,t.length),cipherType:"base64"}).decrypt(e)},signData(e){if(null!=e&&""!=e)return sm3(e)},stringToHex:e=>""===e?"":utils.bytesToHex(utils.strToBytes(e)),strToBytes(e){let t=new Array,o=0;for(let s=0;s<e.length;s++){var r=encodeURI(e[s]);if(1==r.length)t[o++]=r.charCodeAt(0);else{let e=r.split("%");for(var n=1;n<e.length;n++)t[o++]=parseInt("0x"+e[n])}}return t},bytesToHex(e){let t="";for(let o=0;o<e.length;o++){let r=e[o].toString(16);1==r.length&&(r="0"+r),t+=r}return t},getCansValue:()=>"01d0e60cf050",uuid(e,t,o){let r="0123456789".split("");r=1==o?"0123456789".split(""):"0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".split("");let n,s=[];if(t=t||r.length,e)for(n=0;n<e;n++)s[n]=r[0|Math.random()*t];else{let e;for(s[8]=s[13]=s[18]=s[23]="-",s[14]="4",n=0;n<36;n++)s[n]||(e=0|16*Math.random(),s[n]=r[19==n?3&e|8:e])}return s.join("")}};function _0x3fd1(){const e=["LKRQJ","XkMAa","ded; chars","ionHeader","indexOf","retryCount","9BJpdji","method","zUvzI","interfaceV","substr","code","now","JHtdg","oauth2/oau","113536SIxfWh","authorizat","source","jsDataCBC","442-2ab776","token","TDHuP","13705210DSGZts","606nkuKVm","n/json;cha","reduce","oJiiU","gzpiR","keyCode","ode","encryptDat","1d0796","encryptSm4","AsSli","XKFvv","rset=UTF-8","timestamp","k_control_","message","sSKme","2623iYlzVM","push","toUpperCas","ersion","n/x-www-fo","appSecret","OAWxW","lgsuF","GdBgT","yNNLu","KeoZS","rm-urlenco","TYwIe","POST","applicatio","XRlrA","Jfbxw","signData","6184335umNxli","LQaAh","url","sessionId","ion","doDecryptS","oauth2/out","getToken","Token ‰∏∫Á©∫ÔºÅ","er/c02/f02","parse","dtmnS","tlefT","join","IgzNo","Authorizat","keys","deÂ∑≤Â§±Êïà","GET","m4jsDataCB","ZuPEt","6yktcSD","171OckQgB","version","publicKey","oRGje","84c-4beb-b","1194270ljPtva","th/authori","web","pzJkg","mDDJc","Channels","api_list","MAaYN","er/getWebT","access_ris","authorizec","KLuLz","pMqvb","CefMK","redirectUr","6365194zScbgL","JkFYg","includes","ltOom","Accept","et=UTF-8","body","wsgwType","data","Content-Ty","stringify","QQGjX","WEBÊ∏†ÈÅìKeyCo","ion_code","oken","headers","19132doYHZg","encryptKey","length","appKey","bCbtC","464606a4-1"];return(_0x3fd1=function(){return e})()}function _0x4a73(e,t){e-=172;return _0x3fd1()[e]}function encrypt(e){const t=_0x4a73,o={mDDJc:function(e,t){return e(t)},XkMAa:t(240),QQGjX:function(e,t){return e===t},KeoZS:t(217),CefMK:function(e,t){return e>t},TYwIe:t(251),yNNLu:t(273)+"pe",LKRQJ:t(218)+t(188)+t(199),Jfbxw:function(e,t){return e/t},TDHuP:function(e,t){return e>t},MAaYN:t(228)+t(231),bCbtC:function(e,t){return e+t},XKFvv:t(178)+t(250)+"ze",sSKme:t(175),oRGje:t(218)+t(208)+t(215)+t(288)+t(269),gzpiR:t(228)+t(257)+t(278),zUvzI:t(180)+t(277),JHtdg:t(285)+t(248)+t(183)+t(195),lgsuF:function(e,t){return e+t},pzJkg:function(e,t){return e&&t},AsSli:function(e,t){return e/t},ltOom:function(e,t){return e/t},OAWxW:function(e,t){return e+t}};if(e[t(293)]=e[t(293)]||o[t(287)],e[t(279)]=e[t(279)]||{},o[t(275)](e[t(293)][t(206)+"e"](),o[t(214)])){let r=Date[t(176)]();if(o[t(262)](e[t(279)][t(200)],0)&&(r=e[t(279)][t(200)]),_0x2b15d4[t(258)+t(201)+t(255)][t(266)](e[t(224)])&&(e[t(279)][t(225)]=t(251)+r,e[t(270)][t(254)]=o[t(216)]),e[t(279)][o[t(213)]]=e[t(279)][o[t(213)]]||o[t(286)],e[t(279)][t(268)]=o[t(286)],e[t(279)][t(245)]=_0x2b15d4[t(173)+t(207)],e[t(279)][t(181)]=_0x2b15d4[t(181)],e[t(279)][t(200)]=r,e[t(279)][t(271)]=_0x2b15d4[t(271)],e[t(279)][t(283)]=_0x2b15d4[t(283)],e[t(279)][t(184)]){const{token:r}=e[t(279)];e[t(279)].t=r[t(174)](0,o[t(220)](r[t(282)],2))}if(o[t(185)](e[t(224)][t(290)](o[t(256)]),-1)){delete e[t(279)].t;const n={client_secret:_0x2b15d4[t(209)],client_id:_0x2b15d4[t(283)]},s=utils[t(196)+t(182)](JSON[t(274)](n)),i={data:o[t(284)](s,utils[t(221)](o[t(284)](s,r))),skey:utils[t(194)+"a"]("",_0x2b15d4[t(246)]),client_id:_0x2b15d4[t(283)],timestamp:r};e[t(270)]=i,e[t(281)]=T}else if(o[t(185)](e[t(224)][t(290)](o[t(198)]),-1)){delete e[t(279)].t;const n={client_id:_0x2b15d4[t(283)],response_type:o[t(203)],redirect_url:_0x2b15d4[t(263)+"l"],timestamp:r,rsi:e[t(279)][t(184)]};e[t(270)]=n,e[t(279)][o[t(213)]]=o[t(247)],e[t(270)]=Object[t(238)](e[t(270)])[t(189)]((r,n)=>{const s=t;return r[s(205)](n+"="+o[s(253)](encodeURIComponent,e[s(270)][n])),r},[])[t(235)]("&")}else if(o[t(262)](e[t(224)][t(290)](o[t(191)]),-1)){delete e[t(279)].t;let n={grant_type:o[t(172)],sign:utils[t(221)](o[t(284)](_0x2b15d4[t(283)],r)),client_secret:_0x2b15d4[t(209)],state:o[t(177)],key_code:e[t(279)][t(192)],client_id:_0x2b15d4[t(283)],timestamp:r,code:e[t(279)][t(259)+t(193)]},s=utils[t(196)+t(182)](JSON[t(274)](n));const i={data:o[t(284)](s,utils[t(221)](o[t(211)](s,r))),skey:utils[t(194)+"a"]("",e[t(279)][t(246)]),timestamp:r};e[t(270)]=i}else{const{token:n="",accessToken:s=""}=e[t(279)];o[t(252)](n,s)&&(e[t(279)][t(237)+t(226)]=""+_0x2b15d4[t(237)+t(289)]+s[t(174)](0,o[t(197)](s[t(282)],2)));let i="",c=!1;o[t(262)](e[t(279)][t(291)],0)?c=!0:e[t(279)][t(291)]=1,i=c?e[t(270)]:{_access_token:s[t(174)](o[t(220)](s[t(282)],2)),_t:n[t(174)](o[t(267)](n[t(282)],2)),_data:e[t(270)],timestamp:r};const a=utils[t(196)+t(182)](JSON[t(274)](i)),u={data:o[t(210)](a,utils[t(221)](o[t(284)](a,r))),skey:utils[t(194)+"a"]("",e[t(279)][t(246)]),timestamp:r};e[t(270)]=u}}return e}function decrypt({req:e,res:{data:t}}){const o=_0x4a73,r={tlefT:function(e,t){return e===t},IgzNo:function(e,t){return e===t},dtmnS:function(e,t){return e===t},GdBgT:o(276)+o(239),oJiiU:function(e,t){return e===t},LQaAh:function(e,t){return e==t},KLuLz:o(230),XRlrA:function(e,t){return e!=t},pMqvb:function(e,t){return e===t},JkFYg:function(e,t){return e>t},ZuPEt:o(178)+o(250)+"ze"},{headers:n}=e;if(t&&t[o(175)]&&(r[o(234)](10010,t[o(175)])||r[o(236)](10002,t[o(175)])||r[o(233)](r[o(212)],t[o(202)])||r[o(190)](30010,t[o(175)])||r[o(233)](10002,t[o(175)])&&n[o(229)]&&r[o(223)](r[o(260)],t[o(202)])))return t;if(t&&t[o(175)]&&r[o(219)]("",t[o(175)])&&(r[o(261)](10015,t[o(175)])||r[o(234)](10108,t[o(175)])||r[o(233)](10009,t[o(175)])||r[o(190)](10207,t[o(175)])||r[o(236)](10005,t[o(175)])||r[o(261)](10010,t[o(175)])||r[o(233)](30010,t[o(175)])||r[o(233)](10002,t[o(175)])&&r[o(223)](r[o(212)],t[o(202)])||r[o(234)](10002,t[o(175)])&&n[o(184)]&&r[o(223)](r[o(260)],t[o(202)])))return t;if(e[o(224)][o(290)](r[o(265)](r[o(242)],-1))&&t[o(272)]){const e=utils[o(227)+o(241)+"C"](t[o(272)],n[o(184)]);return JSON[o(232)](e)}const s=utils[o(227)+o(241)+"C"](t[o(194)+"a"]);return JSON[o(232)](s)}function getUrlParams(e){const t=e.split("?")[1];if(!t)return{};const o=t.split("&");let r={};for(let e=0;e<o.length;e++){let t=o[e].split("="),n=decodeURIComponent(t[0]),s=decodeURIComponent(t[1]||"");r[n]=s}return r}!function(e,t){const o=_0x4a73,r=_0x3fd1();for(;;)try{if(810720===-parseInt(o(204))/1*(-parseInt(o(187))/2)+-parseInt(o(244))/3*(parseInt(o(280))/4)+-parseInt(o(222))/5*(-parseInt(o(243))/6)+-parseInt(o(249))/7+parseInt(o(179))/8+parseInt(o(292))/9*(-parseInt(o(186))/10)+parseInt(o(264))/11)break;r.push(r.shift())}catch(e){r.push(r.shift())}}();const getEnv=()=>"undefined"!=typeof $environment&&$environment["surge-version"]?"Surge":"undefined"!=typeof $environment&&$environment["stash-version"]?"Stash":eval('typeof process !== "undefined"')?"Node.js":"undefined"!=typeof $task?"Quantumult X":"undefined"!=typeof $loon?"Loon":"undefined"!=typeof $rocket?"Shadowrocket":void 0,isQuanX=()=>"Quantumult X"===getEnv(),isLoon=()=>"Loon"===getEnv(),isStash=()=>"Stash"===getEnv(),isNode=()=>"Node.js"===getEnv();class Logger{constructor(e="Êó•ÂøóËæìÂá∫",t="info"){this.prefix=e,this.levels=["trace","debug","info","warn","error"],this.setLevel(t)}setLevel(e){this.currentLevelIndex=this.levels.indexOf(e)}log(e,...t){this.levels.indexOf(e)>=this.currentLevelIndex&&console.log(`${this.prefix?`[${this.prefix}] `:""}[${e.toUpperCase()}]\n`+[...t].join("\n"))}trace(...e){this.log("trace",...e)}debug(...e){this.log("debug",...e)}info(...e){this.log("info",...e)}warn(...e){this.log("warn",...e)}error(...e){this.log("error",...e)}}const request$1=async(request={}||"",option={})=>{switch(request.constructor){case Object:request={...request,...option};break;case String:request={url:request,...option}}request.method||(request.method="GET",(request.body??request.bodyBytes)&&(request.method="POST")),delete request.headers?.["Content-Length"],delete request.headers?.["content-length"];const method=request.method.toLocaleLowerCase();switch(getEnv()){case"Loon":case"Surge":case"Stash":case"Shadowrocket":default:return delete request.id,request.policy&&(isLoon()&&(request.node=request.policy),isStash()&&(request.headers||(request.headers={}),request.headers["X-Stash-Selected-Proxy"]=encodeURI(request.policy))),ArrayBuffer.isView(request.body)&&(request["binary-mode"]=!0),await new Promise((e,t)=>{$httpClient[method](request,(o,r,n)=>{o?t(o):(r.ok=/^2\d\d$/.test(r.status),r.statusCode=r.status,n&&(r.body=n,1==request["binary-mode"]&&(r.bodyBytes=n)),e(r))})});case"Quantumult X":switch(delete request.scheme,delete request.sessionIndex,delete request.charset,request.policy&&(request.opts||(request.opts={}),request.opts.policy=request.policy),(request?.headers?.["Content-Type"]??request?.headers?.["content-type"])?.split(";")?.[0]){default:delete request.bodyBytes;break;case"application/protobuf":case"application/x-protobuf":case"application/vnd.google.protobuf":case"application/grpc":case"application/grpc+proto":case"application/octet-stream":delete request.body,ArrayBuffer.isView(request.bodyBytes)&&(request.bodyBytes=request.bodyBytes.buffer.slice(request.bodyBytes.byteOffset,request.bodyBytes.byteLength+request.bodyBytes.byteOffset));case void 0:}return await $task.fetch(request).then(e=>(e.ok=/^2\d\d$/.test(e.statusCode),e.status=e.statusCode,e),e=>Promise.reject(e.error));case"Node.js":const got=eval('require("got")');let iconv=eval('require("iconv-lite")');const{url:url,...option}=request;return await got[method](url,option).then(e=>(e.statusCode=e.status,e.body=iconv.decode(e.rawBody,request?.encoding||"utf-8"),e.bodyBytes=e.rawBody,e),e=>{if(e.response&&500===e.response.statusCode)return Promise.reject(e.response.body);Promise.reject(e.message)})}};class Store{constructor(NAMESPACE){if(this.env=getEnv(),this.Store="./store",NAMESPACE&&(this.Store=`./store/${NAMESPACE}`),"Node.js"===this.env){const{LocalStorage:LocalStorage}=eval('require("node-localstorage")');this.localStorage=new LocalStorage(this.Store)}}get(e){switch(this.env){case"Surge":case"Loon":case"Stash":case"Shadowrocket":return $persistentStore.read(e);case"Quantumult X":return $prefs.valueForKey(e);case"Node.js":return this.localStorage.getItem(e);default:return null}}set(e,t){switch(this.env){case"Surge":case"Loon":case"Stash":case"Shadowrocket":return $persistentStore.write(t,e);case"Quantumult X":return $prefs.setValueForKey(t,e);case"Node.js":return this.localStorage.setItem(e,t),!0;default:return null}}clear(e){switch(this.env){case"Surge":case"Loon":case"Stash":case"Shadowrocket":return $persistentStore.write(null,e);case"Quantumult X":return $prefs.removeValueForKey(e);case"Node.js":return this.localStorage.removeItem(e),!0;default:return null}}}const notify=(e="",t="",o="",r={})=>{const n=e=>{const{$open:t,$copy:o,$media:r,$mediaMime:n}=e;switch(typeof e){case void 0:return e;case"string":switch(getEnv()){case"Surge":case"Stash":default:return{url:e};case"Loon":case"Shadowrocket":return e;case"Quantumult X":return{"open-url":e};case"Node.js":return}case"object":switch(getEnv()){case"Surge":case"Stash":case"Shadowrocket":default:{const s={};let i=e.openUrl||e.url||e["open-url"]||t;i&&Object.assign(s,{action:"open-url",url:i});let c=e["update-pasteboard"]||e.updatePasteboard||o;if(c&&Object.assign(s,{action:"clipboard",text:c}),r){let e,t,o;if(r.startsWith("http"))e=r;else if(r.startsWith("data:")){const[e]=r.split(";"),[,n]=r.split(",");t=n,o=e.replace("data:","")}else t=r,o=(e=>{const t={JVBERi0:"application/pdf",R0lGODdh:"image/gif",R0lGODlh:"image/gif",iVBORw0KGgo:"image/png","/9j/":"image/jpg"};for(var o in t)if(0===e.indexOf(o))return t[o];return null})(r);Object.assign(s,{"media-url":e,"media-base64":t,"media-base64-mime":n??o})}return Object.assign(s,{"auto-dismiss":e["auto-dismiss"],sound:e.sound}),s}case"Loon":{const o={};let n=e.openUrl||e.url||e["open-url"]||t;n&&Object.assign(o,{openUrl:n});let s=e.mediaUrl||e["media-url"];return r?.startsWith("http")&&(s=r),s&&Object.assign(o,{mediaUrl:s}),console.log(JSON.stringify(o)),o}case"Quantumult X":{const n={};let s=e["open-url"]||e.url||e.openUrl||t;s&&Object.assign(n,{"open-url":s});let i=e["media-url"]||e.mediaUrl;r?.startsWith("http")&&(i=r),i&&Object.assign(n,{"media-url":i});let c=e["update-pasteboard"]||e.updatePasteboard||o;return c&&Object.assign(n,{"update-pasteboard":c}),console.log(JSON.stringify(n)),n}case"Node.js":return}default:return}};switch(getEnv()){case"Surge":case"Loon":case"Stash":case"Shadowrocket":default:$notification.post(e,t,o,n(r));break;case"Quantumult X":$notify(e,t,o,n(r));case"Node.js":}let s=["","==============üì£Á≥ªÁªüÈÄöÁü•üì£=============="];s.push(e),t&&s.push(t),o&&s.push(o),console.log(s.join("\n"))},done=(e={})=>{switch(getEnv()){case"Surge":case"Loon":case"Stash":case"Shadowrocket":case"Quantumult X":default:$done(e);break;case"Node.js":process.exit(1)}},BASE_URL="https://www.95598.cn",request=async e=>{try{const t=await Encrypt({...e});"/api/oauth2/oauth/authorize"===e.url&&Object.assign(t,{body:t.body.replace(/^\"|\"$/g,"")});let{body:o}=await request$1(t);try{o=JSON.parse(o)}catch{}if(o.code&&(10010==o.code||10002===o.code&&"WEBÊ∏†ÈÅìKeyCodeÂ∑≤Â§±Êïà"==o.message||30010===o.code||"20103"===o.code||10002===o.code&&bizrt.token&&"Token ‰∏∫Á©∫ÔºÅ"==o.message))return Promise.reject(o.message);const r={config:{...e},data:o};return"/api/oauth2/outer/c02/f02"===e.url&&Object.assign(r.config,{headers:{encryptKey:t.encryptKey}}),await Decrypt({req:t,res:{data:o}})}catch(e){return Promise.reject(e)}},Encrypt=async e=>(e.body=e.data,delete e.data,(e=encrypt(e)).url=BASE_URL+e.url,e.body=JSON.stringify(e.body),e),Decrypt=async e=>{const{req:t}=e;let o=decrypt(e);const{code:r,message:n,data:s}=o;return""+r=="1"?s:t.url.indexOf("oauth2/oauth/authorize")>-1&&s&&r&&""!=r&&(10015===r||10108===r||10009===r||10207===r||10005===r||10010===r||30010===r||10002===r&&"WEBÊ∏†ÈÅìKeyCodeÂ∑≤Â§±Êïà"==n||10002===r&&bizrt.token&&"Token ‰∏∫Á©∫ÔºÅ"==n)?Promise.reject(`ÈáçÊñ∞Ëé∑Âèñ: ${n}`):Promise.reject(n)},Recoginze=async e=>{const{data:t}=await request$1({url:"https://www.imarkr.com/api/sliderx",method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({bgBase64:e.canvasSrc,sliderBase64:e.blockSrc,sliderY:Number(e.blockY)})});return t},getBeforeDate=e=>{const t=new Date;return t.setDate(t.getDate()-e),`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}-${String(t.getDate()).padStart(2,"0")}`},jsonParse=e=>{try{return JSON.parse(e)}catch{return e}},jsonStr=(e,...t)=>{try{return JSON.stringify(e,...t)}catch{return e}},isTrue=e=>!0===e||"true"===e||1===e||"1"===e,$api={getKeyCode:"/oauth2/outer/c02/f02",getAuth:"/oauth2/oauth/authorize",getWebToken:"/oauth2/outer/getWebToken",getRoutes:"/osg-web0004/open/c7/f01",searchMenu:"/osg-web0004/open/c2/f02",contentSearch:"/osg-web0004/open/c4/f05",shouyequery:"/osg-web0004/member/c4/f08",seachOrgNo:"/osg-open-om0001/member/c13/f05",detailpcut:"/osg-open-mce0001/member/c4/f06",login:"/osg-open-uc0001/member/c8/f23",loginout:"/osg-open-uc0001/member/c8/f2311111",tokenlogin:"/osg-open-uc0001/member/c8/f01",seachMsgEs:"/osg-web0004/open/c4/f03",orderEmail:"/osg-open-bc0001/member/c02/f04",LowelectBill:"/osg-open-bc0001/member/c04/f01",HideelectBill:"/osg-open-bc0001/member/c04/f02",quantity:"/osg-open-bc0001/member/c01/f01",searchProgress:"/osg-open-uc0001/member/c6/f06",Urge:"/osg-open-woc0001/member/c5/f06",fileLists:"/osg-open-woc0001/member/c27/f01",fileLists2:"/osg-open-woc0001/member/c5/f07",fileLists3:"/osg-open-woc0001/member/c5/f08",realType:"/osg-open-uc0001/member/c7/f01",paymentRecord:"/osg-open-bc0001/member/c03/f12",power:"/osg-omgmt0005/member/c9/f30",accountInfo:"/osg-open-uc0001/member/c4/f01",address:"/osg-open-om0001/member/c72/f01",CheckBillAmount:"/osg-open-bc0001/member/c03/f07",vatname:"/osg-open-uc0001/member/c4/f02",fgd_Submit:"/osg-open-woc0001/member/c4/f09",fgd_appraise:"/osg-open-woc0001/member/c27/f07",shouye:"/osg-web0004/open/c1/f01",captcha:"/osg-web0004/open/c15/f01",login:"/osg-open-uc0001/member/c8/f23",captchaPassword:"/osg-web0004/open/c15/f03",getCode2:"/osg-web0004/open/c50/f02",getCode:"/osg-open-uc0001/member/c8/f24",clickCard:"/osg-web0004/open/c44/f07",useTokenGetInfo:"/osg-uc0013/member/c4/f04",tokenGetUserInfo:"/osg-open-uc0001/member/c8/f56",getQCodeNew:"/osg-open-uc0001/member/c8/f31",checkQCode:"/osg-open-uc0001/member/c8/f32",qcodeCallback:"/osg-open-uc0001/member/c8/f33",content:"/osg-web0004/open/c4/f01",menu:"/osg-web0004/open/c2/f01",indexPage:"/osg-web0004/open/c1/f01",newsList:"/osg-open-mce0001/member/c4/f01",delMsg:"/osg-open-mce0001/member/c4/f05",codeLogin:"/osg-open-uc0001/member/c8/f22",codeLoginApi:"/osg-uc0013/member/c4/f02",reg:"/osg-open-uc0001/member/c8/f25",dianfeiList:"/osg-open-bc0001/member/c01/f02",changePassword:"/osg-open-uc0001/member/c8/f06",Presubmission:"/osg-open-woc0001/member/c4/f03",messageList:"/osg-open-uc0001/member/c13/f01",newMessageList:"/osg-web0004/member/c15/f06",forgetPass:"/osg-open-uc0001/member/c8/f06",sendCode:"/osg-open-uc0001/member/c8/f04",checkCode:"/osg-open-uc0001/member/c8/f05",resetPass:"/osg-open-uc0001/member/c8/f07",submitHouse:"/osg-open-uc0001/member/c5/f04",bindholds:"/osg-open-uc0001/member/c14/f02",getBindDoorCity:"/osg-open-om0001/member/arg/020390006",hadList:"/osg-open-uc0001/member/c9/f02",holdList:"/osg-open-uc0001/member/c9/f03",wantbindhold:"/osg-open-uc0001/member/c9/f04",holdsign:"/osg-open-uc0001/member/c9/f07",Mainhold:"/osg-open-uc0001/member/c9/f05",untying:"/osg-open-uc0001/member/c14/f03",holdCert:"/osg-open-uc0001/member/c5/f02",onSite:"/osg-open-woc0001/member/c27/f20",subJudge:"/osg-open-sfan0001/member/c4/f01",getevalMsg:"/osg-open-om0001/member/c8/f02",getVCommit:"/osg-open-sfan0001/member/c4/f02",pauseSCode:"/osg-open-woc0001/member/c27/f30",newSCode:"/osg-web0004/member/c15/f05",pauseTCode:"/osg-open-woc0001/member/c27/f24",giveHome:"/osg-open-woc0001/member/c4/f13",reName:"/osg-open-woc0001/member/c4/f12",uploadPic:"/osg-open-scp0001/member/c5/f05",uploadAuthPic:"/osg-open-scp0001/member/c5/f07",invoiceList:"/osg-open-bc0001/member/c02/f01",operaLis:"/osg-open-bc0001/member/c02/f03",kpdetailsLis:"/osg-open-bc0001/member/c02/f02",unread:"/osg-open-mce0001/member/c4/f02",readAllMsg:"/osg-open-mce0001/member/c4/f07",markRead:"/osg-open-mce0001/member/arg/010410001",newsdetails:"/osg-open-mce0001/member/c4/f04",newsdelete:"/osg-open-mce0001/member/c4/f05",pay:"/osg-wp0004/member/payment/getPayMethodList",createOrder:"/osg-wp0002/member/charge/createOrder",invokey:"/osg-wp0002/member/charge/invokePay",surplus:"/osg-wp0002/member/charge/getElecUserChargeList",orderStatus:"/osg-wp0002/member/charge/getOrderHeaderStatus",reCardVer:"/osg-wp0002/member/charge/checkRechargeUser",reCardRecharge:"/osg-wp0002/member/charge/rechargeCard",searchUser:"/osg-open-uc0001/member/c9/f02",send:"/osg-open-uc0001/member/c8/f04",code:"/osg-open-uc0001/member/c8/f05",electBill:"/osg-open-bc0001/member/c04/f03",segmentDate:"/osg-open-bc0001/member/arg/020070013",Progress:"/osg-web0004/member/c18/f01",searchProgress2:"/osg-open-uc0001/member/c6/f07",lookMore:"/osg-open-uc0001/member/c6/f02",gdAnniu:"/osg-open-woc0001/member/c27/f19",deleteProgress:"/osg-open-uc0001/member/c6/f05",dataList:"osg-open-woc0001/member/c27/f16",dataList2:"osg-open-woc0001/member/c27/f17",getData:"/osg-open-woc0001/member/c27/f28",getOtherData:"/osg-open-woc0001/member/arg/020370031",startData:"/osg-open-woc0001/member/c27/f27",complaintsubmit:"/osg-open-woc0001/member/c5/f00",reportsubmit:"/osg-open-woc0001/member/c5/f01",professionsubmit:"/osg-open-woc0001/member/c5/f02",havesaysubmit:"/osg-open-woc0001/member/c5/f03",faultrepairsubmit:"/osg-open-woc0001/member/c5/f04",faultrepair:"/osg-open-om0001/member/c72/f02",idauthen:"/osg-open-woc0001/member/c27/f26",companySub:"/osg-open-woc0001/member/c4/f07",increaseSub:"/osg-open-woc0001/member/c4/f10",subzj:"/osg-open-woc0001/member/c4/f06",order:"/osg-open-scp0001/member/c4/f01",vatchang:"/osg-open-woc0001/member/c4/f17",doorNumber:"/osg-open-uc0001/member/c9/f02",setMainDoor:"/osg-open-uc0001/member/c9/f05",queryAbleBindDoorNumber:"/osg-open-uc0001/member/c9/f03",identitySubmit:"/osg-open-uc0001/member/c8/f02",listconsumers:"/osg-open-uc0001/member/c6/f03",delListconsumers:"/osg-open-uc0001/member/arg/020360024",listconsumers_Progress:"/osg-open-uc0001/member/c6/f01",stopCapacity:"/osg-open-woc0001/member/c4/f01",lessCapacity:"/osg-open-woc0001/member/c4/f02",personageApi:"/osg-open-woc0001/member/c4/f11",newHouseholdElectricity:"/osg-open-woc0001/member/c4/f08",certificationSearchFinal:"/osg-open-uc0001/member/c8/f11",identitymap:"/osg-open-uc0001/member/c8/f08",OCR:"/osg-open-uc0001/member/c8/f09",adFlag:"/osg-open-uc0001/member/c14/f01",meterCalibration:"/osg-open-woc0001/member/c4/f05",meteringPoint:"/osg-open-uc0001/member/c6/f11",transformer:"/osg-open-uc0001/member/c6/f08",powerSupply:"/osg-open-uc0001/member/c6/f10",updateUserInfo:"/osg-open-uc0001/member/c8/f03",updateAccount:"/osg-open-uc0001/member/c8/f26",userInfo:"/osg-open-uc0001/member/c8/f01",pauseSub:"/osg-open-woc0001/member/c4/f15",reduceSub:"/osg-open-woc0001/member/c4/f16",infoSupplement:"/osg-open-woc0001/member/c27/f25",electricityPriceStrategyChange:"/osg-open-woc0001/member/arg/030340052",subscriptionList:"/osg-open-mce0001/member/c7/f00",participate:"/osg-open-mce0001/member/c05/f04",fuzzySearch:"/osg-open-uc0001/member/c4/f04",downloadImg:"/osg-open-scp0001/member/c5/f02",tokendownloadImg:"/osg-open-uc0001/member/c8/f72",eemandValueAdjustment:"/osg-open-woc0001/member/c4/f14",oneOffice:"/osg-open-scp0001/member/c4/f02",ceshi:"/osg-rm0001/member/c1/f05",InformationConfirmation:"/osg-open-woc0001/member/c27/f21",vatlist:"/osg-open-om0001/member/c72/f03",payAmtList:"/osg-web0004/member/c77/f01",accapi:"/osg-open-bc0001/member/c05/f01",chergileApi:"/osg-open-woc0001/member/c4/f04",otherApi:"/osg-open-woc0001/member/c27/f40",demographicStatus:"/osg-open-sfan0001/member/c5/f01",demoGraphicChecks:"/osg-open-sfan0001/member/c5/f03",subDemoGraphic:"/osg-woc0001/member/c72/f01",checkHomeApi:"/osg-open-sfan0001/member/c5/f02",biaojiDanHao:"/osg-open-uc0001/member/c6/f09",electTrend:"/osg-open-bc0001/member/c03/f14",dayElectLoad:"/osg-open-bc0001/member/c03/f05",electLoadTrend:"/osg-open-bc0001/member/c03/f06",JiFen:"/osg-open-om0001/member/c19/f01",JiFenYuE:"/osg-open-om0001/member/c19/f02",searchBankBind:"/osg-open-uc0001/member/c8/f18",hasBindBankAuth:"/osg-open-uc0001/member/c8/f20",bankAuthSendCode:"/osg-open-uc0001/member/c8/f16",HBankAuthCode:"/osg-open-uc0001/member/c8/f15",searchBankXY:"/osg-open-uc0001/member/c8/f14",searchIDofBank:"/osg-open-uc0001/member/c8/f13",searchTypeOfBank:"/osg-open-uc0001/member/c8/f12",boundsendver:"/osg-open-uc0001/member/c8/f21",friendLink:"/osg-web0004/open/c5/f01",getIPAddr:"/osg-web0004/open/c8/f01",pauseSCodeApi:"/osg-open-woc0001/member/c27/f30",checkCodeApi:"/osg-woc0001/member/c2/f01",payCodeApi:"/osg-open-uc0001/member/arg/030010192",empowerBindApi:"/osg-open-uc0001/member/arg/030010193",getAuthToken:"/osg-open-uc0001/member/arg/020360047",getUserInfoByAuthToken:"/osg-open-uc0001/member/arg/020360048",loginVerifyCode:"/osg-web0004/open/c44/f01",loginTestCode:"/osg-web0004/open/c44/f02",loginVerifyCodeNew:"/osg-web0004/open/c44/f05",loginTestCodeNew:"/osg-web0004/open/c44/f06",jsonApi:"/osg-web0004/member/c15/f01",getNewsApi:"/osg-web0004/open/c4/f04",getBankInfo:"/osg-open-uc0001/member/c8/f17",newsListApi:"/osg-web0004/member/c15/f02",StopList:"/osg-open-mce0001/member/c06/f01",busInfoApi:"/osg-web0004/member/c24/f01",getIntelligentPaymentStatus:"/osg-open-bc0001/member/arg/020070032",getnewPhoneCode:"/osg-web0004/member/c15/f03",allFileLists:"/osg-web0004/member/c24/f02",changePhoneGetOldCode:"/osg-web0004/member/c15/f04",emergencys:"/osg-open-p0001/member/c5/f03",theme:"/osg-web0004/open/c3/f01",backOrderMsg:"/osg-woc0001/member/c70/f01",queryCarAddress:"/osg-web0004/member/c49/f01",queryBoundGroupAccount:"/osg-open-uc0001/member/arg/030360248",queryBoundGroupSubAccount:"/osg-open-uc0001/member/arg/030360252",queryElectricEnterprise:"/osg-open-bc0001/member/arg/030070112",queryAccountNumberBoundEnterprise:"/osg-open-bc0001/member/arg/030070112",queryapUPConsumingEnterprises:"/osg-open-bc0001/member/arg/030070113",queryPowerHandlingProcess:"/osg-open-woc0001/member/arg/030010214",getAppaVersion:"/osg-web0004/open/c17/f01",homeMsgBox:"/osg-web0004/open/c18/f01",excludeDayCompany:"/osg-open-bc0001/member/c11/f04",excludeDayUser:"/osg-open-bc0001/member/c11/f03",excludeMonthCompany:"/osg-open-bc0001/member/c11/f02",excludeMonthUser:"/osg-open-bc0001/member/c11/f01",eleMonthForecast:"/osg-open-bc0001/member/c11/f00",eleMonthRange:"/osg-open-bc0001/member/c10/f14",eleMonthRangePermit:"/osg-open-bc0001/member/c10/f16",eleDayRange:"/osg-open-bc0001/member/c10/f17",eleDayRangePermit:"/osg-open-bc0001/member/c10/f19",ListAgentUsersElectricitySellingE:"/osg-open-uc0001/member/c9/f11",ListAuthorizeUsersElectricitySellingE:"/osg-open-sfan0001/member/c8/f03",BoundEnterpriseQuery:"/osg-open-uc0001/member/c9/f14",eleMonthThb:"/osg-open-bc0001/member/c10/f14",eleApplyCount:"/osg-open-bc0001/member/c11/f27",eleApplyCountChart:"/osg-open-bc0001/member/c11/f28",applyList:"/osg-open-bc0001/member/c11/f29",unApplyList:"/osg-open-bc0001/member/c11/f30",sendMessageByBatch:"/osg-open-bc0001/member/c11/f32",sendMessageByOne:"/osg-open-bc0001/member/c11/f31",exportApplyedData:"/osg-open-bc0001/member/c11/f56",priceDeviationData:"/osg-open-bc0001/member/c11/f52",priceDeviationTimeType:"/osg-open-bc0001/member/c11/f47",priceClearingCount:"/osg-open-bc0001/member/c11/f41",priceClearingList:"/osg-open-bc0001/member/c11/f42",priceClearingDelete:"/osg-open-bc0001/member/c11/f45",priceClearingDetail:"/osg-open-bc0001/member/c11/f43",priceClearingUpdate:"/osg-open-bc0001/member/c11/f44",priceClearingImportExcel:"/osg-open-bc0001/member/c11/f46",getMetaRegionByFullId:"/osg-open-bc0001/member/c11/f48",getElecList:"/osg-open-bc0001/member/c11/f13",electDelete:"/osg-open-bc0001/member/c11/f15",electDetails:"/osg-open-bc0001/member/c11/f14",electSave:"/osg-open-bc0001/member/c11/f16",applyPageList:"/osg-open-bc0001/member/c11/f49",applyPageCount:"/tradeApplyCaseRq/findApplyCaseRqCount",applyCaseRqDetail:" /osg-open-bc0001/member/c11/f50",applyCaseRqList:"/osg-open-bc0001/member/c11/f51",applyCaseRqSave:"/osg-open-bc0001/member/c11/f53",applyCaseRqDel:"/osg-open-bc0001/member/c11/f54",doHourCompanyFourcast:"/osg-open-bc0001/member/c11/f06",doSaveHourFourcast:" /osg-open-bc0001/member/c11/f07",getHourFourcastTasklist:"/osg-open-bc0001/member/c11/f08",getHourFourcastResultOneday:"/osg-open-bc0001/member/c11/f55",getHourFourcastResultByRefId:"/osg-open-bc0001/member/c11/f10",deleteHourFourcastResultByRefId:"/osg-open-bc0001/member/c11/f11",getDivisionByProviceCode:"/osg-open-bc0001/member/c11/f12",tCsaveTrade:"/osg-open-bc0001/member/c11/f33",tCsetMealList:"/osg-open-bc0001/member/c11/f34",tCdeleteOneById:"/osg-open-bc0001/member/c11/f35",tCgetTcDetailListByTcId:"/osg-open-bc0001/member/c11/f38",eleApplyList:"/osg-open-bc0001/member/c11/f23",eleApplyOne:"/osg-open-bc0001/member/c11/f24",eleApplySave:"/osg-open-bc0001/member/c11/f22",eleApplyModify:"/osg-open-bc0001/member/c11/f26",priceCatPrcQueryBySecNoAndProvince:"/osg-open-bc0001/member/c11/f20",priceCatPrcSave:"/osg-open-bc0001/member/c11/f21",priceCatPrcQueryForecastData:"/osg-open-bc0001/member/c11/f18",priceCatPrcGetBySecNo:"/osg-open-bc0001/member/c11/f17",priceCatPrcQueryElecHourData:"/osg-open-bc0001/member/c11/f19",applyDeviAnalyQuery:"/osg-open-bc0001/member/c11/f05",goodsSaveData:"/osg-open-bc0001/member/arg/030070085",goodsqueryList:"/osg-open-bc0001/member/arg/030070086",getDataByGoodsId:"/osg-open-bc0001/member/arg/030070087",goodsDelete:"/osg-open-bc0001/member/arg/030070088",goodsUpShelf:"/osg-open-bc0001/member/arg/030070089",goodsOffShelf:"/osg-open-bc0001/member/arg/030070090",goodsUploadFile:"/osg-open-bc0001/member/c11/f57",goodsDownloadFile:"/osg-open-bc0001/member/c11/f59",uploadFile:"/osg-open-bc0001/member/c11/f57",fileList:"/osg-open-bc0001/member/arg/030070083",downloadFileList:"/osg-open-bc0001/member/c11/f59",downloadFile:"/osg-open-bc0001/member/c11/f58",deleteFileById:"/osg-open-bc0001/member/arg/030070084",ordersList:"/osg-open-bc0001/member/arg/030210002",ordersDetail:"/osg-open-bc0001/member/arg/030070100",saveHtMain:"/osg-open-bc0001/member/arg/030070101",queryHtMainByOrderId:"/osg-open-bc0001/member/arg/030070102",comboOrdersApplyCancel:"/osg-open-bc0001/member/arg/030070092",comboOrdersConfirmCancel:"/osg-open-bc0001/member/arg/030070093",getFavList:"/osg-open-bc0001/member/arg/030070081",cancelFav:"/osg-open-bc0001/member/arg/030070080",saveFav:"/osg-open-bc0001/member/arg/030070079",ifFav:"/osg-open-bc0001/member/arg/030070082",queryEnquiryPageList:"/osg-open-bc0001/member/arg/030070095",goodsEnquirySaveData:"/osg-open-bc0001/member/arg/030070094",saveReplyEnquiryData:"/osg-open-bc0001/member/arg/030070099",goodsEnquiryList:"/osg-open-bc0001/member/arg/030070095",goodsComboordersCreate:"/osg-open-bc0001/member/arg/030070091",goodsComboordersJudgeQualifications:"/osg-open-bc0001/member/arg/030070098",goodsEnquiryOfferPriceJudge:"/osg-open-bc0001/member/arg/030070096",goodsEnquiryOfferPrice:"/osg-open-bc0001/member/arg/030070097",goodsEnquiryOffShelf:"/osg-open-bc0001/member/arg/030070105",queryDataListByEnquiryVo:"/osg-open-bc0001/member/arg/030070106",queryEnquiryListPage:"/osg-open-bc0001/member/arg/030070107",saveBackEnquiryData:"/osg-open-bc0001/member/arg/030070108",enquiryOrdersApplyCancel:"/osg-open-bc0001/member/arg/030070109",enquiryOrdersConfirmCancel:"/osg-open-bc0001/member/arg/030070110",saveFiles:"/osg-open-bc0001/member/arg/030070111",BindingOfElectricitySellingEnterprises:"/osg-open-uc0001/member/c9/f24",BindEnterprise:"/osg-open-uc0001/member/c8/f60",BoundEnterpriseQuery:"/osg-open-uc0001/member/c9/f14",ListAgentUsersElectricitySellingE:"/osg-open-uc0001/member/c9/f11",getSDCode:"/osg-open-uc0001/member/c8/f04",excludeDayCompany:"/osg-open-bc0001/member/c11/f04",excludeDayUser:"/osg-open-bc0001/member/c11/f03",excludeMonthCompany:"/osg-open-bc0001/member/c11/f02",excludeMonthUser:"/osg-open-bc0001/member/c11/f01",queryHandlerManagement:"/osg-open-sfan0001/member/arg/030330101",handlerPhoneCheck:"/osg-open-sfan0001/member/arg/030330102",getBindHandlerCode:"/osg-open-uc0001/member/arg/030360273",cancelHandlerBind:"/osg-open-sfan0001/member/arg/030330103",infoPublic:"/osg-omgmt1015/content/c01/f52",electrovalenceStandard:"/osg-omgmt1030/priceinfo/c01/f04",electrovalenceType:"/osg-omgmt1030/priceinfo/c01/f05",classicCase:"/osg-omgmt1030/content/c01/f52",uploadfile:"/osg-scp0002/member/c2/f03",dispute:"/osg-open-woc0001/member/c27/f52",disputeDetail:"/osg-open-woc0001/member/c27/f53",selldispite:"/osg-open-woc0001/member/c27/f51",information:"/osg-open-om0001/member/c16/f02",informationList:"/osg-open-om0001/member/c16/f03",searchKeyWords:"/osg-open-om0001/member/arg/020390035",searchKeyWordsInfo:"emss-pfa-pro-front/app_api/selectNewChannelist",billingService:"/osg-open-bc0001/member/c10/f01",monthSearch:"/osg-open-bc0001/member/c03/f15",dataSearch:"/osg-open-bc0001/member/c03/f16",pointSearch:"/osg-open-bc0001/member/c03/f17",indicatSearch:"/osg-open-bc0001/member/c03/f18",indicatPost:"/osg-open-bc0001/member/c03/f19",querySuperAdministrator:"/osg-open-sfan0001/member/arg/030010096",applySuperAdministrator:"/osg-open-sfan0001/member/arg/030330099",getApplicationRecord:"/osg-open-sfan0001/member/arg/030330100",fileUpload:"/osg-open-sfan0001/member/arg/030010098",fileDownload:"/osg-open-sfan0001/member/arg/030010097",querySellerPageList:"/osg-open-sfan0001/member/arg/030010182",querySettlePageList:"/osg-open-sfan0001/member/arg/030010183",elecYdPuPageList:"/osg-open-sfan0001/member/arg/030010178",elecYdPuConfirm:"/osg-open-sfan0001/member/arg/030010179",elecYdPuExport:"/saler/dldl/export",elecSbFdSaveSwdl:"/osg-open-sfan0001/member/arg/030010180",elecSbFdGetSwdl:"/osg-open-sfan0001/member/arg/030010181",salerDldjPageList:"/osg-open-sfan0001/member/arg/030010173",salerDldjConfirm:"/osg-open-sfan0001/member/arg/030010174",salerDldjSave:"/osg-open-sfan0001/member/arg/030010175",salerDldjImport:"/osg-open-sfan0001/member/arg/030010176",salerDldjExport:"/osg-open-sfan0001/member/arg/030010177",unbindPowerGenerationEnterprise:"/osg-open-uc0001/member/arg/030360278",queryPowerGenerationEnterpriseList:"/osg-open-uc0001/member/arg/030360279",bindPowerGenerationEnterprise:"/osg-open-uc0001/member/arg/030360280",queryBoundPowerGenerationEnterpriseList:"/osg-open-uc0001/member/arg/030370095",queryPowerGenerationEnterpriseDetail:"/osg-open-uc0001/member/arg/030360281",downloadNewGenFile:"/osg-open-bc0001/member/arg/020010002",downloadNewGenFile:"/osg-open-bc0001/member/arg/020010002",unbindPowerGenerationEnterprise:"/osg-open-uc0001/member/arg/030360278",queryPowerGenerationEnterpriseList:"/osg-open-uc0001/member/arg/030360279",bindPowerGenerationEnterprise:"/osg-open-uc0001/member/arg/030360280",queryBoundPowerGenerationEnterpriseList:"/osg-open-uc0001/member/arg/030370095",queryPowerGenerationEnterpriseDetail:"/osg-open-uc0001/member/arg/030360281",queryMonthElec:"/osg-open-bc0001/member/arg/020010008",queryMonthsElec:"/osg-open-bc0001/member/arg/020010010",queryDayElec:"/osg-open-bc0001/member/arg/020010009",queryDaysElec:"/osg-open-bc0001/member/arg/020010011",billPageList:"/osg-open-bc0001/member/arg/020010003",getBillById:"/osg-open-bc0001/member/arg/020010005",getMonthBillByMemberID:"/osg-open-bc0001/member/arg/020010004",getBillSummaryData:"/osg-open-bc0001/member/arg/020010007",submitBillData:"/osg-open-bc0001/member/arg/020010006",viewBindingAccountNumber:"/osg-open-uc0001/member/c9/f22",highVoltageSubscriberBinding:"/osg-open-uc0001/member/arg/020210008",saveGfPersonal:"/osg-open-om0001/member/arg/030010195",saveGfEnterprise:"/osg-open-om0001/member/arg/030010196",getGfOwnBankList:"/osg-open-om0001/member/arg/030010203",getGfAgentBankList:"/osg-open-om0001/member/arg/030010201",getGfBankList:"/osg-open-om0001/member/arg/030010205",changeGfBank:"/osg-open-om0001/member/arg/030010206",saveGfOwnBank:"/osg-open-om0001/member/arg/030010204",saveGfAgentBank:"/osg-open-om0001/member/arg/030010202",getGfPhoneCode:"/osg-open-om0001/member/arg/030010199",jointBusinessQuery:"/osg-open-woc0001/member/arg/030010211",jointBusinessSubmit:"/osg-open-woc0001/member/arg/030010212",sendSMS:"/osg-open-uc0001/member/c8/f48",getGBServiceList:"/osg-open-uc0001/member/arg/030360295",checkGBAccount:"/osg-open-uc0001/member/arg/030360297",GBEmpowerBind:"/osg-open-uc0001/member/arg/030360296",getStaticLink:"/osg-open-om0001/member/c11/f07",getBankDatainfo:"/osg-open-sfan0001/member/arg/010210042",labelsAccordingColumn:"/osg-web0004/open/c20/f01",getOurGradesConf:"/osg-web0004/open/c19/f01",subscribeInvoice:"/osg-open-bc0001/member/arg/030070148",emailSubscribe:"/osg-open-bc0001/member/arg/030070146",invoiceingEle:"/osg-open-bc0001/member/arg/030070144",invoiceListBj:"/osg-open-bc0001/member/arg/030070142",invoiceListZl:"/osg-open-bc0001/member/arg/030070149",invoicePrivate:"/osg-open-bc0001/member/arg/020070007",qurGcNoListNew:"/osg-open-woc0001/member/arg/020370033",getConfigInfo:"/osg-open-woc0001/member/arg/020370034",iphoneController:"/osg-open-woc0001/member/arg/020370035",selectElectricity:"/osg-open-woc0001/member/arg/020370038",selectPayScheduleNew:"/osg-open-woc0001/member/arg/020370039",payMessageFeedbackNew:"/osg-open-woc0001/member/arg/020370040",selectActualPaymentInfo:"/osg-open-woc0001/member/arg/020370041"},$configuration={uscInfo:{member:"0902",devciceIp:"",devciceId:"",tenant:"state_grid"},source:"SGAPP",target:"32101",channelCode:"0902",channelNo:"0902",toPublish:"01",siteId:"2012000000033700",srvCode:"",serialNo:"",funcCode:"",serviceCode:{order:"0101154",uploadPic:"0101296",pauseSCode:"0101250",pauseTCode:"0101251",listconsumers:"0101093",messageList:"0101343",submit:"0101003",sbcMsg:"0101210",powercut:"0104514",BkAuth01:"f15",BkAuth02:"f18",BkAuth03:"f02",BkAuth04:"f17",BkAuth05:"f05",BkAuth06:"f16",BkAuth07:"f01",BkAuth08:"f03"},electricityArchives:{servicecode:"0104505",source:"0902"},subscriptionList:{srvCode:"APP_SGPMS_05_030",serialNo:"22",channelCode:"0902",funcCode:"22",target:"-1"},userInformation:{serviceCode:"01008183",source:"SGAPP"},userInform:{serviceCode:"0101183",source:"SGAPP"},elesum:{channelCode:"0902",funcCode:"WEBALIPAY_01",promotCode:"1",promotType:"1",serviceCode:"0101143",source:"app"},account:{channelCode:"0902",funcCode:"WEBA1007200"},doorNumberManeger:{source:"0902",target:"-1",channelCode:"09",channelNo:"09",serviceCode:"01010049",funcCode:"WEBA40050000",uscInfo:{member:"0902",devciceIp:"",devciceId:"",tenant:"state_grid"}},doorAuth:{source:"SGAPP",serviceCode:"f04"},xinZ:{serCat:"101",jM_busiTypeCode:"101",fJ_busiTypeCode:"102",jM_custType:"03",fJ_custType:"02",serviceType:"01",subBusiTypeCode:"",funcCode:"WEBA10070700",order:"0101154",source:"SGAPP",querytypeCode:"1"},onedo:{serviceCode:"0101046",source:"SGAPP",funcCode:"WEBA10070700",queryType:"03"},xinHuTongDian:{serCat:"110",busiTypeCode:"211",subBusiTypeCode:"21102",funcCode:"WEBA10071200",channelCode:"0902",source:"09",serviceCode:"0101183"},company:{serCat:"104",funcCode:"WEBA10070700",serviceType:"02",querytypeCode:"1",authFlag:"1",source:"SGAPP",order:"0101154"},charge:{channelCode:"09",funcCode:"WEBA10071300",channelNo:"0901",serCat:"102",jM_custType:"01",jM_busiTypeCode:"102"},other:{channelCode:"09",funcCode:"WEBA10079700",serCat:"129",busiTypeCode:"999",subBusiTypeCode:"21501",serviceCode:"BCP_000026",srvCode:"",serialNo:""},vatchange:{submit:"0101003",busiTypeCode:"320",subBusiTypeCode:"",serCat:"115",funcCode:"WEBA10074000",authFlag:"1"},bill:{clearCache:"1",funcCode:"WEBALIPAY_01",promotType:"1",serviceCode:"BCP_000026"},stepelect:{channelCode:"0902",funcCode:"WEBALIPAY_01",promotType:"1",clearCache:"09",serviceCode:"BCP_000026",source:"app"},intelligentPayment:{serviceCode:"0102719",source:"SGAPP"},getday:{channelCode:"0902",clearCache:"11",funcCode:"WEBALIPAY_01",promotCode:"1",promotType:"1",serviceCode:"BCP_000026",source:"app"},mouthOut:{channelCode:"0902",clearCache:"11",funcCode:"WEBALIPAY_01",promotCode:"1",promotType:"1",serviceCode:"BCP_000026",source:"app"},meter:{serCat:"114",busiTypeCode:"304",funcCode:"WEBA10071000",subBusiTypeCode:"",serviceCode:"0101046",serialNo:""},complaint:{busiTypeCode:"005",srvMode:"0902",anonymousFlag:"0",replyMode:"01",retvisitFlag:"01"},report:{busiTypeCode:"006"},tradewinds:{busiTypeCode:"019"},somesay:{busiTypeCode:"091"},faultrepair:{funcCode:"WEBA10070900",serviceCode:"0101183",serCat:"111",busiTypeCode:"001",subBusiTypeCode:"21505"},electronicInvoice:{serCat:"105",busiTypeCode:"0"},rename:{serviceCode:"0101046",funcCode:"WEBA10076100",busiTypeCode:"210",serCat:"109",authFlag:"1",gh_busiTypeCode:"211",gh_subusi:"21101",serialNo:"",srvCode:""},pause:{subBusiTypeCode:"",serviceCode:"01010049",funcCode:"WEBA10073600",serCat:"107",busiTypeCode:"201",jr_busi:"201",serialNo:"",srvCode:"",order:"0101154",source:"SGAPP",querytypeCode:"1"},capacityRecovery:{serviceCode:"01010049",source:"SGAPP",srvCode:"",serialNo:"",funcCode:"WEBA10073700",busiTypeCode_stop:"204",busiTypeCode_less:"202",busiTypeCode:"202",subBusiTypeCode:"",serCat:"108",timeDay:"5",authFlag:"1"},electricityPriceChange:{serviceCode:"0101183",busiTypeCode:"215",subBusiTypeCode:"21502",serCat:"113",authFlag:"1",timeDay:"15",funcCode:"WEBA10073900WEB",srvCode:"",serialNo:""},electricityPriceStrategyChange:{serviceCode:"01008183",busiTypeCode:"215",subBusiTypeCode:"21506",serCat:"160",funcCode:"WEBV00000517WEB",srvCode:"",serialNo:""},eemandValueAdjustment:{serviceCode:"0101183",srvCode:"",serialNo:"",serCat:"112",funcCode:"WEBA10073800",busiTypeCode:"215",subBusiTypeCode:"21504",authFlag:"1",timeDay:"5",getMonthServiceCode:"0101046"},businessProgress:{serviceCode:"0101183",srvCode:"01",funcCode:"WEB01"},increase:{source:"SGAPP",serialNo:"",srvCode:"",serviceCode_smt:"01010049",serviceCode:"0101154",order:"0101154",funcCode:"WEBA10070800",querytypeCode:"1",serCat:"106",busiTypeCode:"111",subBusiTypeCode:""},fjincrea:{serCat:"105",busiTypeCode:"110",subBusiTypeCode:"",source:"SGAPP",funcCode:"WEBA10070800",serialNo:"",srvCode:"",serviceCode_smt:"01010049",serviceCode:"0101154",order:"0101154",querytypeCode:"1"},persIncrea:{serCat:"105",busiTypeCode:"109",order:"0101154",subBusiTypeCode:"",source:"SGAPP",funcCode:"WEBA10070800",querytypeCode:"1"},fgdChange:{serviceCode:"0101183",srvCode:"01",channelCode:"09",funcCode:"WEBA10070900",busiTypeCode:"215",subBusiTypeCode:"21505",serCat:"111",authFlag:"1"},createOrder:{channelCode:"0902",funcCode:"WEBALIPAY_01",srvCode:"BCP_000001",chargeMode:"02",conType:"01",bizTypeId:"BT_ELEC"},largePopulation:{busiTypeCode:"383",funcCode:"WEBA10076800",subBusiTypeCode:"",srvCode:"",promotType:"",promotCode:"",channelCode:"0901",serCat:"383",serviceCode:"",serialNo:""},biaoJiCode:{serviceCode:"0104507",source:"1704",channelCode:"1704"},biaoJiCode:{serviceCode:"0104507",source:"1704",channelCode:"1704"},twoGuar:{busiTypeCode:"402",subBusiTypeCode:"40201",funcCode:"web_twoGuar"},electTrend:{serviceCode:"BCP_00026",channelCode:"0902"},emergency:{serviceCode:"BCP_00026",funcCode:"A10000000",channelCode:"0902"},infoPublic:{serviceCode:"2545454",source:"app"}},Notify=isNode()?require("./sendNotify"):"",SCRIPTNAME="ÁΩë‰∏äÂõΩÁΩë",NAMESPACE="ONZ3V",store=new Store(NAMESPACE),Global="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};Global.bizrt=jsonParse(store.get("95598_bizrt"))||{};const log=new Logger(SCRIPTNAME,isTrue(isNode()?process.env.WSGW_LOG_DEBUG:store.get("95598_log_debug"))?"debug":"info"),USERNAME=(isNode()?process.env.WSGW_USERNAME:store.get("95598_username"))||($argument||"|").split("|")[0],PASSWORD=(isNode()?process.env.WSGW_PASSWORD:store.get("95598_password"))||($argument||"|").split("|")[1];async function getKeyCode(){console.log("‚è≥ Ëé∑ÂèñkeyCodeÂíåpublicKey...");try{const e={url:`/api${$api.getKeyCode}`,method:"post",headers:{}};Global.requestKey=await request(e),log.info("‚úÖ Ëé∑ÂèñkeyCodeÂíåpublicKeyÊàêÂäü"),log.debug(`üîë keyCode&publicKey: ${jsonStr(requestKey,null,2)}`)}catch(e){return Promise.reject(`Ëé∑ÂèñkeyCodeÂíåPublicKeyÂ§±Ë¥•: ${e}`)}finally{console.log("üîö Ëé∑ÂèñkeyCodeÂíåpublicKeyÁªìÊùü")}}async function getVerifyCode(){console.log("‚è≥ Ëé∑ÂèñÈ™åËØÅÁ†Å...");try{const e={url:`/api${$api.loginVerifyCodeNew}`,method:"post",data:{password:md5(PASSWORD).toUpperCase(),account:USERNAME,canvasHeight:200,canvasWidth:310},headers:{...requestKey}},t=await request(e);log.info("‚úÖ Ëé∑ÂèñÈ™åËØÅÁ†ÅÂá≠ËØÅÊàêÂäü"),log.debug(`üîë È™åËØÅÁ†ÅÂá≠ËØÅ: ${t.ticket}`);const{x:o}=await Recoginze(t);return log.info("‚úÖ ËØÜÂà´È™åËØÅÁ†ÅÊàêÂäü"),log.debug(`üîë È™åËØÅÁ†Å: ${o}`),{code:o,ticket:t.ticket}}catch(e){return Promise.reject("Ëé∑ÂèñÈ™åËØÅÁ†ÅÂ§±Ë¥•: "+e)}finally{console.log("üîö Ëé∑ÂèñÈ™åËØÅÁ†ÅÁªìÊùü")}}async function login(e,t){console.log("‚è≥ ÁôªÂΩï‰∏≠...");try{const o={url:`/api${$api.loginTestCodeNew}`,method:"post",headers:{...requestKey},data:{loginKey:e,code:t,params:{uscInfo:{devciceIp:"",tenant:"state_grid",member:"0902",devciceId:""},quInfo:{optSys:"android",pushId:"000000",addressProvince:"110100",password:md5(PASSWORD).toUpperCase(),addressRegion:"110101",account:USERNAME,addressCity:"330100"}},Channels:"web"}},{bizrt:r}=await request(o);if(!(r?.userInfo?.length>0))return Promise.reject("ÁôªÂΩïÂ§±Ë¥•: ËØ∑Ê£ÄÊü•‰ø°ÊÅØÂ°´ÂÜôÊòØÂê¶Ê≠£Á°Æ! ");store.set("95598_bizrt",jsonStr(r)),Global.bizrt=r,log.info("‚úÖ ÁôªÂΩïÊàêÂäü"),log.debug(`üîë Áî®Êà∑Âá≠ËØÅ: ${r.token}`,`üë§ Áî®Êà∑‰ø°ÊÅØ: ${r.userInfo[0].nickname||r.userInfo[0].loginAccount}`)}catch(e){return/È™åËØÅÈîôËØØ/.test(e)?(log.error(`ÊªëÂùóÈ™åËØÅÂá∫Èîô, ÈáçÊñ∞ÁôªÂΩï: ${e}`),await doLogin()):Promise.reject(`ÁôªÈôÜÂ§±Ë¥•: ${e}`)}finally{console.log("üîö ÁôªÂΩïÁªìÊùü")}}async function getAuthcode(){console.log("‚è≥ Ëé∑ÂèñÊéàÊùÉÁ†Å...");try{const e={url:`/api${$api.getAuth}`,method:"post",headers:{...requestKey,token:bizrt.token}},{redirect_url:t}=await request(e);Global.authorizecode=t.split("?code=")[1],log.info("‚úÖ Ëé∑ÂèñÊéàÊùÉÁ†ÅÊàêÂäü"),log.debug(`üîë ÊéàÊùÉÁ†Å: ${authorizecode}`)}catch(e){return Promise.reject(`Ëé∑ÂèñÊéàÊùÉÁ†ÅÂ§±Ë¥•: ${e}`)}finally{console.log("üîö Ëé∑ÂèñÊéàÊùÉÁ†ÅÁªìÊùü")}}async function getAccessToken(){console.log("‚è≥ Ëé∑ÂèñÂá≠ËØÅ...");try{const e={url:`/api${$api.getWebToken}`,method:"post",headers:{...requestKey,token:bizrt.token,authorizecode:authorizecode}};Global.accessToken=await request(e).then(e=>e.access_token),log.info("‚úÖ Ëé∑ÂèñÂá≠ËØÅÊàêÂäü"),log.debug(`üîë AccessToken: ${accessToken}`)}catch(e){return Promise.reject(`Ëé∑ÂèñÂá≠ËØÅÂ§±Ë¥•: ${e}`)}finally{console.log("üîö Ëé∑ÂèñÂá≠ËØÅÁªìÊùü")}}async function getBindInfo(){console.log("‚è≥ Êü•ËØ¢ÁªëÂÆö‰ø°ÊÅØ...");try{const e={url:`/api${$api.searchUser}`,method:"post",headers:{...requestKey,token:bizrt.token,accessToken:accessToken},data:{serviceCode:$configuration.userInform.serviceCode,source:$configuration.source,target:$configuration.target,uscInfo:{member:$configuration.uscInfo.member,devciceIp:$configuration.uscInfo.devciceIp,devciceId:$configuration.uscInfo.devciceId,tenant:$configuration.uscInfo.tenant},quInfo:{userId:bizrt.userInfo[0].userId},token:bizrt.token,Channels:"web"}};Global.bindInfo=await request(e).then(e=>e.bizrt),log.info("‚úÖ Ëé∑ÂèñÁªëÂÆö‰ø°ÊÅØÊàêÂäü"),log.debug(`üîë Áî®Êà∑ÁªëÂÆö‰ø°ÊÅØ: ${jsonStr(bindInfo,null,2)}`)}catch(e){return Promise.reject(`Ëé∑ÂèñÁªëÂÆö‰ø°ÊÅØÂ§±Ë¥•: ${e}`)}finally{console.log("üîö Êü•ËØ¢ÁªëÂÆö‰ø°ÊÅØÁªìÊùü")}}async function getElcFee(e){console.log("‚è≥ Êü•ËØ¢ÁîµË¥π...");try{const t=bindInfo.powerUserList[e],[o]=bizrt.userInfo,r={url:`/api${$api.accapi}`,method:"post",headers:{...requestKey,token:bizrt.token,accessToken:accessToken},data:{data:{srvCode:"",serialNo:"",channelCode:$configuration.account.channelCode,funcCode:$configuration.account.funcCode,acctId:o.userId,userName:o.loginAccount?o.loginAccount:o.nickname,promotType:"1",promotCode:"1",userAccountId:o.userId,list:[{consNoSrc:t.consNo_dst,proCode:t.proNo,sceneType:t.constType,consNo:t.consNo,orgNo:t.orgNo}]},serviceCode:"0101143",source:$configuration.source,target:t.proNo||t.provinceId}};Global.eleBill=await request(r).then(e=>e.list[0]),log.info("‚úÖ Êü•ËØ¢ÁîµË¥πÊàêÂäü"),log.debug(`üîë ÁîµË¥π‰ø°ÊÅØ: ${jsonStr(Global.eleBill,null,2)}`),Global.eleBill.powerUserList?store.set("eleBill",jsonStr(Global.eleBill)):store.get("eleBill")&&(Global.eleBill=jsonParse(store.get("eleBill")))}catch(e){return store.get("eleBill")&&(Global.eleBill=jsonParse(store.get("eleBill"))),console.log(`Êü•ËØ¢ÁîµË¥πÂ§±Ë¥•: ${e}`)}finally{console.log("üîö Êü•ËØ¢ÁîµË¥πÁªìÊùü")}}async function getDayElecQuantity(e){console.log("‚è≥ Ëé∑ÂèñÊó•Áî®ÁîµÈáè...");try{const t=bindInfo.powerUserList[e],[o]=bizrt.userInfo,r=getBeforeDate(6),n=getBeforeDate(1),s={url:`/api${$api.busInfoApi}`,method:"post",headers:{...requestKey,token:bizrt.token,accessToken:accessToken},data:{params1:{serviceCode:$configuration.serviceCode,source:$configuration.source,target:$configuration.target,uscInfo:{member:$configuration.uscInfo.member,devciceIp:$configuration.uscInfo.devciceIp,devciceId:$configuration.uscInfo.devciceId,tenant:$configuration.uscInfo.tenant},quInfo:{userId:o.userId},token:bizrt.token},params3:{data:{acctId:o.userId,consNo:t.consNo_dst,consType:"02"==t.constType?"02":"01",endTime:n,orgNo:t.orgNo,queryYear:(new Date).getFullYear().toString(),proCode:t.proNo||t.provinceId,serialNo:"",srvCode:"",startTime:r,userName:o.nickname?o.nickname:o.loginAccount,funcCode:$configuration.getday.funcCode,channelCode:$configuration.getday.channelCode,clearCache:$configuration.getday.clearCache,promotCode:$configuration.getday.promotCode,promotType:$configuration.getday.promotType},serviceCode:$configuration.getday.serviceCode,source:$configuration.getday.source,target:t.proNo||t.provinceId},params4:"010103"}},i=await request(s);log.info("‚úÖ Ëé∑ÂèñÊó•Áî®ÁîµÈáèÊàêÂäü"),log.debug(jsonStr(i,null,2)),Global.dayElecQuantity=i,Global.dayElecQuantity.sevenEleList?store.set("dayElecQuantity",jsonStr(Global.dayElecQuantity)):store.get("dayElecQuantity")&&(Global.dayElecQuantity=jsonParse(store.get("dayElecQuantity")))}catch(e){return store.get("dayElecQuantity")&&(Global.dayElecQuantity=jsonParse(store.get("dayElecQuantity"))),console.log("Ëé∑ÂèñÊó•Áî®ÁîµÈáèÂ§±Ë¥•: "+e)}finally{console.log("üîö Ëé∑ÂèñÊó•Áî®ÁîµÈáèÁªìÊùü")}}async function getDay31ElecQuantity(e){console.log("‚è≥ Ëé∑ÂèñÊó•Áî®ÁîµÈáè...");try{const t=bindInfo.powerUserList[e],[o]=bizrt.userInfo,r=getBeforeDate(32),n=getBeforeDate(1),s={url:`/api${$api.busInfoApi}`,method:"post",headers:{...requestKey,token:bizrt.token,accessToken:accessToken},data:{params1:{serviceCode:$configuration.serviceCode,source:$configuration.source,target:$configuration.target,uscInfo:{member:$configuration.uscInfo.member,devciceIp:$configuration.uscInfo.devciceIp,devciceId:$configuration.uscInfo.devciceId,tenant:$configuration.uscInfo.tenant},quInfo:{userId:o.userId},token:bizrt.token},params3:{data:{acctId:o.userId,consNo:t.consNo_dst,consType:"02"==t.constType?"02":"01",endTime:n,orgNo:t.orgNo,queryYear:(new Date).getFullYear().toString(),proCode:t.proNo||t.provinceId,serialNo:"",srvCode:"",startTime:r,userName:o.nickname?o.nickname:o.loginAccount,funcCode:$configuration.getday.funcCode,channelCode:$configuration.getday.channelCode,clearCache:$configuration.getday.clearCache,promotCode:$configuration.getday.promotCode,promotType:$configuration.getday.promotType},serviceCode:$configuration.getday.serviceCode,source:$configuration.getday.source,target:t.proNo||t.provinceId},params4:"010103"}},i=await request(s);log.info("‚úÖ Ëé∑Âèñ32Êó•Áî®ÁîµÈáèÊàêÂäü"),log.debug(jsonStr(i,null,2)),Global.dayElecQuantity31=i,Global.dayElecQuantity31.sevenEleList?store.set("dayElecQuantity31",jsonStr(Global.dayElecQuantity31)):store.get("dayElecQuantity31")&&(Global.dayElecQuantity31=jsonParse(store.get("dayElecQuantity31")))}catch(e){return store.get("dayElecQuantity31")&&(Global.dayElecQuantity31=jsonParse(store.get("dayElecQuantity31"))),console.log("Ëé∑Âèñ32Êó•Áî®ÁîµÈáèÂ§±Ë¥•: "+e)}finally{console.log("üîö Ëé∑Âèñ32Êó•Áî®ÁîµÈáèÁªìÊùü")}}async function getMonthElecQuantity(e){console.log("‚è≥ Ëé∑ÂèñÊúàÁî®ÁîµÈáè...");const t=bindInfo.powerUserList[e],[o]=bizrt.userInfo;try{let e={url:`/api${$api.busInfoApi}`,method:"post",headers:{...requestKey,token:bizrt.token,accessToken:accessToken},data:{params1:{serviceCode:$configuration.serviceCode,source:$configuration.source,target:$configuration.target,uscInfo:{member:$configuration.uscInfo.member,devciceIp:$configuration.uscInfo.devciceIp,devciceId:$configuration.uscInfo.devciceId,tenant:$configuration.uscInfo.tenant},quInfo:{userId:o.userId},token:bizrt.token},params3:{data:{acctId:o.userId,consNo:t.consNo_dst,consType:"02"==t.constType?"02":"01",orgNo:t.orgNo,proCode:t.proNo||t.provinceId,provinceCode:t.proNo||t.provinceId,queryYear:(new Date).getFullYear().toString(),serialNo:"",srvCode:"",userName:o.nickname?o.nickname:o.loginAccount,funcCode:$configuration.mouthOut.funcCode,channelCode:$configuration.mouthOut.channelCode,clearCache:$configuration.mouthOut.clearCache,promotCode:$configuration.mouthOut.promotCode,promotType:$configuration.mouthOut.promotType},serviceCode:$configuration.mouthOut.serviceCode,source:$configuration.mouthOut.source,target:t.proNo||t.provinceId},params4:"010102"}};const r=await request(e);log.info("‚úÖ Ëé∑ÂèñÊúàÁî®ÁîµÈáèÊàêÂäü"),log.debug(jsonStr(r,null,2)),Global.monthElecQuantity=r,Global.monthElecQuantity.mothEleList?store.set("monthElecQuantity",jsonStr(Global.monthElecQuantity)):store.get("monthElecQuantity")&&(Global.monthElecQuantity=jsonParse(store.get("monthElecQuantity")))}catch(e){return store.get("monthElecQuantity")&&(Global.monthElecQuantity=jsonParse(store.get("monthElecQuantity"))),console.log(`Ëé∑ÂèñÊúàÁî®ÁîµÈáèÂ§±Ë¥•: ${e}`)}finally{console.log("üîö Ëé∑ÂèñÊúàÁî®ÁîµÈáèÁªìÊùü")}}async function getLastYearElecQuantity(e){console.log("‚è≥ Ëé∑ÂèñÂéªÂπ¥Áî®ÁîµÈáè...");const t=bindInfo.powerUserList[e],[o]=bizrt.userInfo;try{let e={url:`/api${$api.busInfoApi}`,method:"post",headers:{...requestKey,token:bizrt.token,accessToken:accessToken},data:{params1:{serviceCode:$configuration.serviceCode,source:$configuration.source,target:$configuration.target,uscInfo:{member:$configuration.uscInfo.member,devciceIp:$configuration.uscInfo.devciceIp,devciceId:$configuration.uscInfo.devciceId,tenant:$configuration.uscInfo.tenant},quInfo:{userId:o.userId},token:bizrt.token},params3:{data:{acctId:o.userId,consNo:t.consNo_dst,consType:"02"==t.constType?"02":"01",orgNo:t.orgNo,proCode:t.proNo||t.provinceId,provinceCode:t.proNo||t.provinceId,queryYear:((new Date).getFullYear()-1).toString(),serialNo:"",srvCode:"",userName:o.nickname?o.nickname:o.loginAccount,funcCode:$configuration.mouthOut.funcCode,channelCode:$configuration.mouthOut.channelCode,clearCache:$configuration.mouthOut.clearCache,promotCode:$configuration.mouthOut.promotCode,promotType:$configuration.mouthOut.promotType},serviceCode:$configuration.mouthOut.serviceCode,source:$configuration.mouthOut.source,target:t.proNo||t.provinceId},params4:"010102"}};const r=await request(e);log.info("‚úÖ Ëé∑ÂèñÂéªÂπ¥ÁîµÈáèÊàêÂäü"),log.debug(jsonStr(r,null,2)),Global.lastYearElecQuantity=r,Global.lastYearElecQuantity.dataInfo?store.set("lastYearElecQuantity",jsonStr(Global.lastYearElecQuantity)):store.get("lastYearElecQuantity")&&(Global.lastYearElecQuantity=jsonParse(store.get("lastYearElecQuantity")))}catch(e){return store.get("lastYearElecQuantity")&&(Global.lastYearElecQuantity=jsonParse(store.get("lastYearElecQuantity"))),console.log(`Ëé∑ÂèñÊúàÁî®ÁîµÈáèÂ§±Ë¥•: ${e}`)}finally{console.log("üîö Ëé∑ÂèñÊúàÁî®ÁîµÈáèÁªìÊùü")}}async function getSegmentDate(e,t){console.log("‚è≥ Ê±üËãèÂú∞Âå∫ÁâπÊÆäÂ§ÑÁêÜ...");try{let o={url:`/api${$api.segmentDate}`,method:"post",headers:{...requestKey,token:bizrt.token,accessToken:accessToken},data:{data:{acctId:"acctid01",channelCode:"SGAPP",consNo:e.consNo_dst,funcCode:"A10079078",promotCode:"1",promotType:"1",provinceCode:"32101",serialNo:"",srvCode:"123",userName:"acctid01",year:t.year},serviceCode:"0101798",source:"app",target:e.proNo}};const r=await request(o);log.info("‚úÖ Ê±üËãèÂú∞Âå∫ÁâπÊÆäÂ§ÑÁêÜÊàêÂäü"),log.debug(jsonStr(r,null,2));let n=r.billList;return n[n.length-1]}catch(e){throw new Error(`Ê±üËãèÂú∞Âå∫ÁâπÊÆäÂ§ÑÁêÜÂ§±Ë¥•: ${e}`)}finally{console.log("üîö Ê±üËãèÂú∞Âå∫ÁâπÊÆäÂ§ÑÁêÜÁªìÊùü")}}async function getStepElecQuantity(e,t){console.log("‚è≥ Ëé∑ÂèñÈò∂Ê¢ØÁî®Áîµ...");try{const o=bindInfo.powerUserList[e],[r]=bizrt.userInfo;let n=new Date,s={year:n.getFullYear(),months:t||n.getMonth()},i="",c="",a=s.months;a<=9?i=s.year+"-0"+a:a>9&&(i=s.year+"-"+a);let u="";"32101"===o.proNo?(c=await getSegmentDate(o,s),u=s.year+"-"+a):u=i;const p={url:`/api/${"33101"==(o.orgNo||o.provinceId)?"01"==o.constType?$api.HideelectBill:$api.LowelectBill:$api.electBill}`,method:"post",headers:{...requestKey,token:bizrt.token,accessToken:accessToken},data:{data:{channelCode:$configuration.stepelect.channelCode,funcCode:$configuration.stepelect.funcCode,promotType:$configuration.stepelect.promotType,clearCache:$configuration.stepelect.clearCache,consNo:o.consNo_dst,promotCode:o.proNo||o.provinceId,orgNo:o.orgNo||i.orgNo,queryDate:u,provinceCode:o.proNo||o.provinceId,consType:o.constType||o.consSortCode,userAccountId:r.userId,serialNo:"",srvCode:"",calcId:c?c.calcId:void 0,userName:r.nickname||r.loginAccount,acctId:r.userId},serviceCode:$configuration.stepelect.serviceCode,source:$configuration.stepelect.source,target:o.proNo||o.provinceId}},l=await request(p);if(log.info("‚úÖ Ëé∑ÂèñÈò∂Ê¢ØÁî®ÁîµÊàêÂäü"),log.debug(jsonStr(l,null,2)),"1"!==l.rtnCode)return Promise.reject(l.rtnMsg);Global.stepElecQuantity=l.list||{},Global.stepElecQuantity.sevenEleList?store.set("stepElecQuantity",jsonStr(Global.stepElecQuantity)):store.get("stepElecQuantity")&&(Global.stepElecQuantity=jsonParse(store.get("stepElecQuantity")))}catch(e){return store.get("stepElecQuantity")&&(Global.stepElecQuantity=jsonParse(store.get("stepElecQuantity"))),console.log(`Ëé∑ÂèñÈò∂Ê¢ØÁî®ÁîµÂ§±Ë¥•: ${e}`)}finally{console.log("üîö Ëé∑ÂèñÈò∂Ê¢ØÁî®ÁîµÁªìÊùü")}}async function doLogin(){const{code:e,ticket:t}=await getVerifyCode();await login(t,e)}async function showNotice(){console.log(""),console.log("1. Êú¨ËÑöÊú¨‰ªÖÁî®‰∫éÂ≠¶‰π†Á†îÁ©∂ÔºåÁ¶ÅÊ≠¢Áî®‰∫éÂïÜ‰∏öÁî®ÈÄî"),console.log("2. Êú¨ËÑöÊú¨‰∏ç‰øùËØÅÂáÜÁ°ÆÊÄß„ÄÅÂèØÈù†ÊÄß„ÄÅÂÆåÊï¥ÊÄßÂíåÂèäÊó∂ÊÄß"),console.log("3. ‰ªª‰Ωï‰∏™‰∫∫ÊàñÁªÑÁªáÂùáÂèØÊó†ÈúÄÁªèËøáÈÄöÁü•ËÄåËá™Áî±‰ΩøÁî®"),console.log("4. ‰ΩúËÄÖÂØπ‰ªª‰ΩïËÑöÊú¨ÈóÆÈ¢òÊ¶Ç‰∏çË¥üË¥£ÔºåÂåÖÊã¨Áî±Ê≠§‰∫ßÁîüÁöÑ‰ªª‰ΩïÊçüÂ§±"),console.log("5. Â¶ÇÊûú‰ªª‰ΩïÂçï‰ΩçÊàñ‰∏™‰∫∫ËÆ§‰∏∫ËØ•ËÑöÊú¨ÂèØËÉΩÊ∂âÂ´å‰æµÁäØÂÖ∂ÊùÉÂà©ÔºåÂ∫îÂèäÊó∂ÈÄöÁü•Âπ∂Êèê‰æõË∫´‰ªΩËØÅÊòé„ÄÅÊâÄÊúâÊùÉËØÅÊòéÔºåÊàëÂ∞ÜÂú®Êî∂Âà∞ËÆ§ËØÅÊñá‰ª∂Á°ÆËÆ§ÂêéÂà†Èô§"),console.log("6. ËØ∑ÂãøÂ∞ÜÊú¨ËÑöÊú¨Áî®‰∫éÂïÜ‰∏öÁî®ÈÄîÔºåÁî±Ê≠§ÂºïËµ∑ÁöÑÈóÆÈ¢ò‰∏é‰ΩúËÄÖÊó†ÂÖ≥"),console.log("7. Êú¨ËÑöÊú¨ÂèäÂÖ∂Êõ¥Êñ∞ÁâàÊùÉÂΩí‰ΩúËÄÖÊâÄÊúâ"),console.log("")}async function sendMsg(e,t,o,r){const n=r?.["open-url"]||r?.openUrl||r?.$open||r?.url,s=r?.["media-url"]||r?.mediaUrl||r?.$media;isNode()?(o+=n?`\nÁÇπÂáªË∑≥ËΩ¨: ${n}`:"",o+=s?`\nÂ§öÂ™í‰Ωì: ${s}`:"",console.log(`${e}\n${t}\n${o}\n`),await Notify.sendNotify(`${e}\n${t}`,o)):notify(e,t,o,r)}function getDataSource(e){const t=getUrlParams($request.url);if(!Object.keys(t).length)return Promise.all([getElcFee(e),getDayElecQuantity(e),getDay31ElecQuantity(e),getMonthElecQuantity(e),getLastYearElecQuantity(e),getStepElecQuantity(e)]);const o=[];return t.eleBill&&o.push(getElcFee(e)),t.dayElecQuantity&&o.push(getDayElecQuantity(e)),t.dayElecQuantity31&&o.push(getDay31ElecQuantity(e)),t.monthElecQuantity&&o.push(getMonthElecQuantity(e)),t.lastYearElecQuantity&&o.push(getLastYearElecQuantity(e)),t.stepElecQuantity&&o.push(getStepElecQuantity(e)),Promise.all(o)}(async()=>{if(await showNotice(),!USERNAME||!PASSWORD)return sendMsg(SCRIPTNAME,"ËØ∑ÂÖàÈÖçÁΩÆÁΩë‰∏äÂõΩÁΩëË¥¶Âè∑ÂØÜÁ†Å!","ÁÇπÂáªÂâçÂæÄBoxJsÈÖçÁΩÆ",{"open-url":"http://boxjs.com/#/sub/add/https%3A%2F%2Fraw.githubusercontent.com%2FYuheng0101%2FX%2Fmain%2FTasks%2Fboxjs.json"});await getKeyCode(),bizrt?.token&&bizrt?.userInfo||await doLogin(),await getAuthcode(),await getAccessToken(),await getBindInfo();const e=new Array(bindInfo.powerUserList.length);for(let t=0;t<bindInfo.powerUserList.length;t++){try{await getDataSource(t)}catch(e){let o=(new Date).getMonth()-1;-1===o&&(o=11),await getStepElecQuantity(t,o)}const o=bindInfo.powerUserList[t],r=Number(eleBill?.historyOwe||"0")>0||Number(eleBill?.sumMoney||"0")<0;e[t]={eleBill:Global.eleBill,userInfo:o,dayElecQuantity:Global.dayElecQuantity,dayElecQuantity31:Global.dayElecQuantity31,monthElecQuantity:Global.monthElecQuantity,lastYearElecQuantity:Global.lastYearElecQuantity,stepElecQuantity:Global.stepElecQuantity,arrearsOfFees:r}}const t={status:isQuanX()?"HTTP/1.1 200":200,headers:{"content-type":"application/json;charset=utf8"},body:jsonStr(e)};done(isQuanX()?t:{response:t})})().catch(e=>{/Êó†Êïà|Â§±Êïà|ËøáÊúü|ÈáçÊñ∞Ëé∑Âèñ|ËØ∑Ê±ÇÂºÇÂ∏∏/.test(e)&&(store.clear("95598_bizrt"),console.log("‚úÖ Ê∏ÖÁêÜÁºìÂ≠òÊï∞ÊçÆÊàêÂäü")),log.error(e)}).finally(done);
